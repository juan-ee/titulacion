const ga = require('ga-tsp');
const KmeansLib = require('kmeans-same-size');
const app =  require('express')();
const api = require('./apis');
var bodyParser = require('body-parser');
const fs = require('fs');

app.use(bodyParser.json()); // support json encoded bodies
app.use(bodyParser.urlencoded({ extended: true })); // support encoded bodies

app.listen(3000);
app.locals.title = 'My App';

// app.get('/params', function (req, res) { //query params
//     // ?order=desc&shoe[color]=blue&shoe[type]=converse   => { order: 'desc', shoe: { color: 'blue', type: 'converse' } }
//     var color = req.query.color;
//     res.send('color: '+color+'\n'+req.query);
// });
//
// app.get('/id/:id', function (req, res) { //route params
//     res.send('id: '+req.params.id);
// });
//
//
// app.param('id', function(req, res, next, name) { //midleware
//     var modified = name + '-dude';
//
//     // save name to the request
//     req.name = modified;
//
//     next();
// });

// app.get('/pois', function (req, res) { //?location[lat]=40.765068&location[lng]=-73.987452&days=3&categories[]=museum&categories[]=church&categories[]=park
//     const userInfo = req.query;
//     res.json(userInfo);
// });

app.get('/pois',function (req,res) {
    const userInfo = req.query;
    var pois = [];
    var promises = [];
    for(var i in userInfo.categories){
        promises.push(
            new Promise(function (resolve) {
                api.getPois(userInfo.location,userInfo.categories[i],function (results) {
                    resolve(results);
                });
            })
        );
    }
    Promise.all(promises).then(function (results) {
        pois = pois.concat.apply(pois, results);
        getDetails(pois,function (pois_details) {
            getClusters(pois_details,userInfo.days,function (clusters) {
                getTours(clusters,function (results) {
                    res.json(results);
                })
            });
        });

    });

    //quitar esto
    // clusters = [[{"formatted_address":"1000 5th Ave, New York, NY 10028, USA","formatted_phone_number":"(212) 535-7710","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"f732f202150af1f14ae8a057a1014ceea6b33fc4","international_phone_number":"+1 212-535-7710","name":"The Metropolitan Museum of Art","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1730"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1730"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1730"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1730"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1730"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"2100"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:30 PM","Tuesday: 10:00 AM – 5:30 PM","Wednesday: 10:00 AM – 5:30 PM","Thursday: 10:00 AM – 5:30 PM","Friday: 10:00 AM – 9:00 PM","Saturday: 10:00 AM – 9:00 PM","Sunday: 10:00 AM – 5:30 PM"]},"place_id":"ChIJb8Jg9pZYwokR-qHGtvSkLzs","rating":4.8,"url":"https://maps.google.com/?cid=4264808743088595450","utc_offset":-300,"vicinity":"1000 5th Avenue, New York","website":"http://www.metmuseum.org/","location":{"lat":40.7794366,"lng":-73.963244},"expected_time":83,"lat":40.7794366,"lng":-73.963244},{"formatted_address":"Central Park West & 79th St, New York, NY 10024, USA","formatted_phone_number":"(212) 769-5100","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"d9dd2c58ebb5c5cb4d00b28db933b7e220a34b5a","international_phone_number":"+1 212-769-5100","name":"American Museum of Natural History","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1745"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1745"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1745"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1745"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1745"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1745"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1745"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:45 PM","Tuesday: 10:00 AM – 5:45 PM","Wednesday: 10:00 AM – 5:45 PM","Thursday: 10:00 AM – 5:45 PM","Friday: 10:00 AM – 5:45 PM","Saturday: 10:00 AM – 5:45 PM","Sunday: 10:00 AM – 5:45 PM"]},"place_id":"ChIJCXoPsPRYwokRsV1MYnKBfaI","rating":4.6,"url":"https://maps.google.com/?cid=11708656934508584369","utc_offset":-300,"vicinity":"Central Park West & 79th St, New York","website":"http://www.amnh.org/","location":{"lat":40.78132409999999,"lng":-73.9739882},"expected_time":35,"lat":40.78132409999999,"lng":-73.9739882},{"formatted_address":"2 Lincoln Square, New York, NY 10023, USA","formatted_phone_number":"(212) 595-9533","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"a9ffefef860f76e7fe7abc01b3ca90a35e06afba","international_phone_number":"+1 212-595-9533","name":"American Folk Art Museum","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1800"},"open":{"day":0,"time":"1200"}},{"close":{"day":2,"time":"1900"},"open":{"day":2,"time":"1130"}},{"close":{"day":3,"time":"1900"},"open":{"day":3,"time":"1130"}},{"close":{"day":4,"time":"1900"},"open":{"day":4,"time":"1130"}},{"close":{"day":5,"time":"1930"},"open":{"day":5,"time":"1200"}},{"close":{"day":6,"time":"1900"},"open":{"day":6,"time":"1130"}}],"weekday_text":["Monday: Closed","Tuesday: 11:30 AM – 7:00 PM","Wednesday: 11:30 AM – 7:00 PM","Thursday: 11:30 AM – 7:00 PM","Friday: 12:00 – 7:30 PM","Saturday: 11:30 AM – 7:00 PM","Sunday: 12:00 – 6:00 PM"]},"place_id":"ChIJEeD6FPVYwokRgs0ZbWMrrzk","rating":4.2,"url":"https://maps.google.com/?cid=4156588687118421378","utc_offset":-300,"vicinity":"2 Lincoln Square, New York","website":"http://www.folkartmuseum.org/","location":{"lat":40.773207,"lng":-73.98138999999999},"expected_time":62,"lat":40.773207,"lng":-73.98138999999999},{"formatted_address":"945 Madison Ave, New York, NY 10021, USA","formatted_phone_number":"(212) 731-1675","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"b2bef6fd6caa815c30e9ee876410794af3a0ee02","international_phone_number":"+1 212-731-1675","name":"The Met Breuer","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1730"},"open":{"day":0,"time":"1000"}},{"close":{"day":2,"time":"1730"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1730"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1730"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"2100"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 10:00 AM – 5:30 PM","Wednesday: 10:00 AM – 5:30 PM","Thursday: 10:00 AM – 5:30 PM","Friday: 10:00 AM – 9:00 PM","Saturday: 10:00 AM – 9:00 PM","Sunday: 10:00 AM – 5:30 PM"]},"place_id":"ChIJl-WU6pRYwokRA91OgdYWfa4","rating":4.5,"url":"https://maps.google.com/?cid=12573230845236534531","utc_offset":-300,"vicinity":"945 Madison Avenue, New York","website":"http://www.metmuseum.org/visit/the-met-breuer","location":{"lat":40.7734196,"lng":-73.96380549999999},"expected_time":39,"lat":40.7734196,"lng":-73.96380549999999},{"formatted_address":"170 Central Park West, New York, NY 10024, USA","formatted_phone_number":"(212) 873-3400","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png","id":"58fec942ca75a6d83d1b6c6ff242c405c77741bf","international_phone_number":"+1 212-873-3400","name":"New-York Historical Society Museum & Library","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1700"},"open":{"day":0,"time":"1100"}},{"close":{"day":2,"time":"1800"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1800"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1800"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"2000"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 10:00 AM – 6:00 PM","Wednesday: 10:00 AM – 6:00 PM","Thursday: 10:00 AM – 6:00 PM","Friday: 10:00 AM – 8:00 PM","Saturday: 10:00 AM – 6:00 PM","Sunday: 11:00 AM – 5:00 PM"]},"place_id":"ChIJIVEyfY5YwokRXqcWLrl5XVA","rating":4.3,"url":"https://maps.google.com/?cid=5790918532117473118","utc_offset":-300,"vicinity":"170 Central Park West, New York","website":"http://www.nyhistory.org/","location":{"lat":40.779351,"lng":-73.974115},"expected_time":77,"lat":40.779351,"lng":-73.974115},{"formatted_address":"175-208 79th Street Central Park West, New York, NY 10024, USA","formatted_phone_number":"(212) 769-5100","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"c413262999f0818e8355b7539ff6eaf8eb6d0550","international_phone_number":"+1 212-769-5100","name":"Rose Center for Earth & Space","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1745"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1745"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1745"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1745"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1745"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1745"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1745"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:45 PM","Tuesday: 10:00 AM – 5:45 PM","Wednesday: 10:00 AM – 5:45 PM","Thursday: 10:00 AM – 5:45 PM","Friday: 10:00 AM – 5:45 PM","Saturday: 10:00 AM – 5:45 PM","Sunday: 10:00 AM – 5:45 PM"]},"place_id":"ChIJo9DW6I9YwokR8UjIKmzHkrI","rating":4.8,"url":"https://maps.google.com/?cid=12867566352739092721","utc_offset":-300,"vicinity":"175-208 79th Street Central Park West, New York","website":"http://www.amnh.org/rose/","location":{"lat":40.78154379999999,"lng":-73.97324309999999},"expected_time":50,"lat":40.78154379999999,"lng":-73.97324309999999},{"formatted_address":"1 E 70th St, New York, NY 10021, USA","formatted_phone_number":"(212) 288-0700","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"87e936eb75a829e0363d510c2060a6621f83f9c7","international_phone_number":"+1 212-288-0700","name":"The Frick Collection","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1700"},"open":{"day":0,"time":"1100"}},{"close":{"day":2,"time":"1800"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1800"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1800"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1800"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 10:00 AM – 6:00 PM","Wednesday: 10:00 AM – 6:00 PM","Thursday: 10:00 AM – 6:00 PM","Friday: 10:00 AM – 6:00 PM","Saturday: 10:00 AM – 6:00 PM","Sunday: 11:00 AM – 5:00 PM"]},"place_id":"ChIJHRH97uxYwokR6CBeDyn1jtg","rating":4.6,"url":"https://maps.google.com/?cid=15604679315585638632","utc_offset":-300,"vicinity":"1 East 70th Street, New York","website":"http://www.frick.org/","location":{"lat":40.771209,"lng":-73.9673991},"expected_time":40,"lat":40.771209,"lng":-73.9673991},{"formatted_address":"405 W 59th St, New York, NY 10019, USA","formatted_phone_number":"(212) 265-3495","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"9a21620619374c7cd37052f0318612c6b8c3f48b","international_phone_number":"+1 212-265-3495","name":"The Church of St. Paul the Apostle","place_id":"ChIJC1050FhYwokR_5BJB8M4-bo","rating":4.8,"url":"https://maps.google.com/?cid=13472862170547589375","utc_offset":-300,"vicinity":"405 West 59th Street, New York","website":"http://www.stpaultheapostle.org/","location":{"lat":40.7699132,"lng":-73.985153},"expected_time":62,"lat":40.7699132,"lng":-73.985153},{"formatted_address":"152 W 71st St, New York, NY 10023, USA","formatted_phone_number":"(212) 877-3111","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"9124578121da04dcd246104079e7846c0be39ac6","international_phone_number":"+1 212-877-3111","name":"Church of the Blessed Sacrament","place_id":"ChIJ4UhFX4pYwokRLH3QqDn0wMg","rating":4.3,"url":"https://maps.google.com/?cid=14465830531596582188","utc_offset":-300,"vicinity":"152 West 71st Street, New York","website":"http://www.blessedsacramentnyc.org/","location":{"lat":40.77711,"lng":-73.981217},"expected_time":55,"lat":40.77711,"lng":-73.981217},{"formatted_address":"236 W 73rd St, New York, NY 10023, USA","formatted_phone_number":"(212) 877-8227","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"ea809378ca1ccfaf9012cb2a74299feacc52c2e8","international_phone_number":"+1 212-877-8227","name":"Rutgers Presbyterian Church","opening_hours":{"open_now":true,"periods":[{"close":{"day":1,"time":"1700"},"open":{"day":1,"time":"0900"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"0900"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"0900"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"0900"}},{"close":{"day":5,"time":"1700"},"open":{"day":5,"time":"0900"}}],"weekday_text":["Monday: 9:00 AM – 5:00 PM","Tuesday: 9:00 AM – 5:00 PM","Wednesday: 9:00 AM – 5:00 PM","Thursday: 9:00 AM – 5:00 PM","Friday: 9:00 AM – 5:00 PM","Saturday: Closed","Sunday: Closed"]},"place_id":"ChIJhxrRAopYwokREKOFY1JScU4","rating":4.5,"url":"https://maps.google.com/?cid=5652389521137181456","utc_offset":-300,"vicinity":"236 West 73rd Street, New York","website":"http://rutgerschurch.org/","location":{"lat":40.77937289999999,"lng":-73.98207579999999},"expected_time":90,"lat":40.77937289999999,"lng":-73.98207579999999},{"formatted_address":"865 Madison Ave, New York, NY 10021, USA","formatted_phone_number":"(212) 288-4100","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"a283661e520a8fed62b673785ef871154529815e","international_phone_number":"+1 212-288-4100","name":"St James' Church","place_id":"ChIJWbN8oexYwokRZyFScgqlH-I","rating":4.5,"url":"https://maps.google.com/?cid=16293923441135984999","utc_offset":-300,"vicinity":"865 Madison Avenue, New York","website":"http://www.stjames.org/","location":{"lat":40.77109859999999,"lng":-73.96536429999999},"expected_time":80,"lat":40.77109859999999,"lng":-73.96536429999999},{"formatted_address":"3 W 65th St, New York, NY 10023, USA","formatted_phone_number":"(212) 877-6815","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"a3d4fefa1ac2674697e902b47213cc077371bad6","international_phone_number":"+1 212-877-6815","name":"Holy Trinity Lutheran Church","place_id":"ChIJl4xr-fRYwokRvITflUru_ns","rating":4.9,"url":"https://maps.google.com/?cid=8934840714859087036","utc_offset":-300,"vicinity":"3 West 65th Street, New York","website":"http://www.holytrinitynyc.org/","location":{"lat":40.77208590000001,"lng":-73.97945229999999},"expected_time":54,"lat":40.77208590000001,"lng":-73.97945229999999},{"formatted_address":"New York, NY, USA","formatted_phone_number":"(212) 310-6600","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"c9bcef33f0cc85eda31f1c7444e9b1a3b82c9a9f","international_phone_number":"+1 212-310-6600","name":"Central Park","opening_hours":{"open_now":true,"periods":[{"close":{"day":1,"time":"0100"},"open":{"day":0,"time":"0600"}},{"close":{"day":2,"time":"0100"},"open":{"day":1,"time":"0600"}},{"close":{"day":3,"time":"0100"},"open":{"day":2,"time":"0600"}},{"close":{"day":4,"time":"0100"},"open":{"day":3,"time":"0600"}},{"close":{"day":5,"time":"0100"},"open":{"day":4,"time":"0600"}},{"close":{"day":6,"time":"0100"},"open":{"day":5,"time":"0600"}},{"close":{"day":0,"time":"0100"},"open":{"day":6,"time":"0600"}}],"weekday_text":["Monday: 6:00 AM – 1:00 AM","Tuesday: 6:00 AM – 1:00 AM","Wednesday: 6:00 AM – 1:00 AM","Thursday: 6:00 AM – 1:00 AM","Friday: 6:00 AM – 1:00 AM","Saturday: 6:00 AM – 1:00 AM","Sunday: 6:00 AM – 1:00 AM"]},"place_id":"ChIJ4zGFAZpYwokRGUGph3Mf37k","rating":4.8,"url":"https://maps.google.com/?cid=13393458397880860953","utc_offset":-300,"vicinity":"New York","website":"http://www.centralparknyc.org/","location":{"lat":40.7828647,"lng":-73.9653551},"expected_time":79,"lat":40.7828647,"lng":-73.9653551},{"formatted_address":"Bow Bridge, New York, NY 10024, USA","formatted_phone_number":"(212) 310-6600","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"e1edc0ca0334804d809aedeee44e853fafd6068b","international_phone_number":"+1 212-310-6600","name":"Bow Bridge Central Park","opening_hours":{"open_now":true,"periods":[{"close":{"day":1,"time":"0100"},"open":{"day":0,"time":"0600"}},{"close":{"day":2,"time":"0100"},"open":{"day":1,"time":"0600"}},{"close":{"day":3,"time":"0100"},"open":{"day":2,"time":"0600"}},{"close":{"day":4,"time":"0100"},"open":{"day":3,"time":"0600"}},{"close":{"day":5,"time":"0100"},"open":{"day":4,"time":"0600"}},{"close":{"day":6,"time":"0100"},"open":{"day":5,"time":"0600"}},{"close":{"day":0,"time":"0100"},"open":{"day":6,"time":"0600"}}],"weekday_text":["Monday: 6:00 AM – 1:00 AM","Tuesday: 6:00 AM – 1:00 AM","Wednesday: 6:00 AM – 1:00 AM","Thursday: 6:00 AM – 1:00 AM","Friday: 6:00 AM – 1:00 AM","Saturday: 6:00 AM – 1:00 AM","Sunday: 6:00 AM – 1:00 AM"]},"place_id":"ChIJiR6aeI1YwokRkCNO-e1lQfs","rating":4.6,"url":"https://maps.google.com/?cid=18104864049770406800","utc_offset":-300,"vicinity":"Bow Bridge, New York","website":"http://centralparknyc.org/","location":{"lat":40.7757932,"lng":-73.9718243},"expected_time":41,"lat":40.7757932,"lng":-73.9718243}],[{"formatted_address":"Pier 86, W 46th St & 12th Ave, New York, NY 10036, USA","formatted_phone_number":"(212) 245-0072","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"6bb43beb2047e4db91e332d24782460ccf8194c2","international_phone_number":"+1 212-245-0072","name":"Intrepid Sea, Air & Space Museum","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1700"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1700"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1700"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1700"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:00 PM","Tuesday: 10:00 AM – 5:00 PM","Wednesday: 10:00 AM – 5:00 PM","Thursday: 10:00 AM – 5:00 PM","Friday: 10:00 AM – 5:00 PM","Saturday: 10:00 AM – 5:00 PM","Sunday: 10:00 AM – 5:00 PM"]},"place_id":"ChIJnxlg1U5YwokR8T90UrZiIwI","rating":4.6,"url":"https://maps.google.com/?cid=154075347467649009","utc_offset":-300,"vicinity":"Pier 86, West 46th Street & 12th Ave, New York","website":"http://www.intrepidmuseum.org/","location":{"lat":40.7645266,"lng":-73.99960759999999},"expected_time":69,"lat":40.7645266,"lng":-73.99960759999999},{"formatted_address":"11 W 53rd St, New York, NY 10019, USA","formatted_phone_number":"(212) 708-9400","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"05fd8501e2532c0ea3033bd3f3a282ffff502863","international_phone_number":"+1 212-708-9400","name":"The Museum of Modern Art","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1730"},"open":{"day":0,"time":"1030"}},{"close":{"day":1,"time":"1730"},"open":{"day":1,"time":"1030"}},{"close":{"day":2,"time":"1730"},"open":{"day":2,"time":"1030"}},{"close":{"day":3,"time":"1730"},"open":{"day":3,"time":"1030"}},{"close":{"day":4,"time":"1730"},"open":{"day":4,"time":"1030"}},{"close":{"day":5,"time":"2000"},"open":{"day":5,"time":"1030"}},{"close":{"day":6,"time":"1730"},"open":{"day":6,"time":"1030"}}],"weekday_text":["Monday: 10:30 AM – 5:30 PM","Tuesday: 10:30 AM – 5:30 PM","Wednesday: 10:30 AM – 5:30 PM","Thursday: 10:30 AM – 5:30 PM","Friday: 10:30 AM – 8:00 PM","Saturday: 10:30 AM – 5:30 PM","Sunday: 10:30 AM – 5:30 PM"]},"place_id":"ChIJKxDbe_lYwokRVf__s8CPn-o","rating":4.5,"url":"https://maps.google.com/?cid=16906389583988522837","utc_offset":-300,"vicinity":"11 West 53rd Street, New York","website":"http://www.moma.org/","location":{"lat":40.7614327,"lng":-73.97762159999999},"expected_time":37,"lat":40.7614327,"lng":-73.97762159999999},{"formatted_address":"2 Columbus Cir, New York, NY 10019, USA","formatted_phone_number":"(212) 299-7777","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"3c7c7abc978aaf5c71af2d6a91662d885d84faa1","international_phone_number":"+1 212-299-7777","name":"Museum of Arts and Design (MAD)","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1800"},"open":{"day":0,"time":"1000"}},{"close":{"day":2,"time":"1800"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1800"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"2100"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1800"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 10:00 AM – 6:00 PM","Wednesday: 10:00 AM – 6:00 PM","Thursday: 10:00 AM – 9:00 PM","Friday: 10:00 AM – 6:00 PM","Saturday: 10:00 AM – 6:00 PM","Sunday: 10:00 AM – 6:00 PM"]},"place_id":"ChIJgVtmM_ZYwokRcJJnebe5KX8","price_level":3,"rating":4.1,"url":"https://maps.google.com/?cid=9163059114528969328","utc_offset":-300,"vicinity":"2 Columbus Circle, New York","website":"http://madmuseum.org/","location":{"lat":40.767395,"lng":-73.982034},"expected_time":38,"lat":40.767395,"lng":-73.982034},{"formatted_address":"25 W 52nd St, New York, NY 10019, USA","formatted_phone_number":"(212) 621-6600","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"c72e1e94e6509aa6e79672abf1c4d43f4f7f0db4","international_phone_number":"+1 212-621-6600","name":"The Paley Center For Media","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1800"},"open":{"day":0,"time":"1200"}},{"close":{"day":3,"time":"1800"},"open":{"day":3,"time":"1200"}},{"close":{"day":4,"time":"2000"},"open":{"day":4,"time":"1200"}},{"close":{"day":5,"time":"1800"},"open":{"day":5,"time":"1200"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1200"}}],"weekday_text":["Monday: Closed","Tuesday: Closed","Wednesday: 12:00 – 6:00 PM","Thursday: 12:00 – 8:00 PM","Friday: 12:00 – 6:00 PM","Saturday: 12:00 – 6:00 PM","Sunday: 12:00 – 6:00 PM"]},"place_id":"ChIJF5e1QvlYwokRcVF6x1CEcQk","rating":4.3,"url":"https://maps.google.com/?cid=680470501188587889","utc_offset":-300,"vicinity":"25 West 52nd Street, New York","website":"http://www.paleycenter.org/","location":{"lat":40.76060299999999,"lng":-73.977599},"expected_time":56,"lat":40.76060299999999,"lng":-73.977599},{"formatted_address":"Pier 86, 12th Ave & W 46th St, New York, NY 10036, USA","formatted_phone_number":"(212) 245-0072","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"478ff2e8a2918302e49fac497fc7ad24f46842b1","international_phone_number":"+1 212-245-0072","name":"Space Shuttle Pavillion","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1700"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1700"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1700"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1700"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:00 PM","Tuesday: 10:00 AM – 5:00 PM","Wednesday: 10:00 AM – 5:00 PM","Thursday: 10:00 AM – 5:00 PM","Friday: 10:00 AM – 5:00 PM","Saturday: 10:00 AM – 5:00 PM","Sunday: 10:00 AM – 5:00 PM"]},"place_id":"ChIJqYNWJ0lYwokR0bWj13-SWEk","rating":4.6,"url":"https://maps.google.com/?cid=5285135240495609297","utc_offset":-300,"vicinity":"Pier 86, 12th Avenue & W 46th St, New York","website":"http://www.intrepidmuseum.org/shuttle/Home.aspx","location":{"lat":40.76514179999999,"lng":-74.0017859},"expected_time":78,"lat":40.76514179999999,"lng":-74.0017859},{"formatted_address":"227 W 27th St, New York, NY 10001, USA","formatted_phone_number":"(212) 217-4558","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"380100c97ba247051b8bc048b7e93c0c676e7b3e","international_phone_number":"+1 212-217-4558","name":"The Museum at FIT","opening_hours":{"open_now":true,"periods":[{"close":{"day":2,"time":"2000"},"open":{"day":2,"time":"1200"}},{"close":{"day":3,"time":"2000"},"open":{"day":3,"time":"1200"}},{"close":{"day":4,"time":"2000"},"open":{"day":4,"time":"1200"}},{"close":{"day":5,"time":"2000"},"open":{"day":5,"time":"1200"}},{"close":{"day":6,"time":"1700"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 12:00 – 8:00 PM","Wednesday: 12:00 – 8:00 PM","Thursday: 12:00 – 8:00 PM","Friday: 12:00 – 8:00 PM","Saturday: 10:00 AM – 5:00 PM","Sunday: Closed"]},"place_id":"ChIJzT4qRatZwokRELNiRd8Su_4","rating":4.2,"url":"https://maps.google.com/?cid=18355285456429691664","utc_offset":-300,"vicinity":"227 West 27th Street, New York","website":"http://www.fitnyc.edu/museum","location":{"lat":40.7466,"lng":-73.994193},"expected_time":54,"lat":40.7466,"lng":-73.994193},{"formatted_address":"237 W 51st St, New York, NY 10019, USA","formatted_phone_number":"(212) 541-6300","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"bb4ac2e4ec26910d50f4cf23c1b1bb448d9e63e6","international_phone_number":"+1 212-541-6300","name":"Times Square Church","opening_hours":{"open_now":false,"periods":[{"close":{"day":0,"time":"2000"},"open":{"day":0,"time":"0800"}},{"close":{"day":2,"time":"2100"},"open":{"day":2,"time":"1700"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"1730"}}],"weekday_text":["Monday: Closed","Tuesday: 5:00 – 9:00 PM","Wednesday: Closed","Thursday: Closed","Friday: 5:30 – 9:00 PM","Saturday: Closed","Sunday: 8:00 AM – 8:00 PM"]},"place_id":"ChIJVUGHS1ZYwokRx39CH6zNL5M","rating":4.7,"url":"https://maps.google.com/?cid=10605921786623328199","utc_offset":-300,"vicinity":"237 West 51st Street, New York","website":"http://tsc.nyc/","location":{"lat":40.76234169999999,"lng":-73.98393879999999},"expected_time":49,"lat":40.76234169999999,"lng":-73.98393879999999},{"formatted_address":"1 W 53rd St, New York, NY 10019, USA","formatted_phone_number":"(212) 757-7013","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"37a913d1b1383a74feb58d11d53c80825450452d","international_phone_number":"+1 212-757-7013","name":"Saint Thomas Church Fifth Avenue","place_id":"ChIJQxcQwftYwokRKy-FqagoB7g","rating":4.6,"url":"https://maps.google.com/?cid=13260612332679409451","utc_offset":-300,"vicinity":"1 West 53rd Street, New York","website":"http://www.saintthomaschurch.org/","location":{"lat":40.7608247,"lng":-73.9763978},"expected_time":66,"lat":40.7608247,"lng":-73.9763978},{"formatted_address":"145 W 46th St, New York, NY 10036, USA","formatted_phone_number":"(212) 869-5830","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"5b0c99ef6093e9d83df5ce66604e780e934dd53a","international_phone_number":"+1 212-869-5830","name":"St Mary the Virgin Church","place_id":"ChIJTZmnm1VYwokRpy2xcCtdR3g","rating":4.5,"url":"https://maps.google.com/?cid=8666998449053445543","utc_offset":-300,"vicinity":"145 West 46th Street, New York","website":"http://www.stmvirgin.org/","location":{"lat":40.7583542,"lng":-73.9836316},"expected_time":71,"lat":40.7583542,"lng":-73.9836316},{"formatted_address":"1166 Avenue of the Americas 16th Floor, New York, NY 10036, USA","formatted_phone_number":"(212) 808-4460","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"9649e699bf5b4206e23c2620caf22ed36de390aa","international_phone_number":"+1 212-808-4460","name":"Redeemer Presbyterian Church Offices","place_id":"ChIJG3veoshYwokR6GrX_-_I_18","rating":4.9,"url":"https://maps.google.com/?cid=6917468485779417832","utc_offset":-300,"vicinity":"1166 Avenue of the Americas 16th Floor, New York","website":"http://www.redeemer.com/","location":{"lat":40.7568777,"lng":-73.9820345},"expected_time":42,"lat":40.7568777,"lng":-73.9820345},{"formatted_address":"308 W 46th St, New York, NY 10036, USA","formatted_phone_number":"(212) 246-3540","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"68fe3c195df22960137d461ae69de4bbbc9c70f9","international_phone_number":"+1 212-246-3540","name":"St Luke's Lutheran Church","place_id":"ChIJq8nBDVRYwokRJiahNbQZYcU","rating":5,"url":"https://maps.google.com/?cid=14222677359997298214","utc_offset":-300,"vicinity":"308 West 46th Street, New York","website":"http://www.stlukesnyc.org/","location":{"lat":40.7600066,"lng":-73.98869069999999},"expected_time":48,"lat":40.7600066,"lng":-73.98869069999999},{"formatted_address":"123 W 57th St # 3, New York, NY 10019, USA","formatted_phone_number":"(212) 975-0170","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png","id":"80736da1aa0301951ffa51927bce3fbc49238c29","international_phone_number":"+1 212-975-0170","name":"Calvary Baptist Church","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1930"},"open":{"day":0,"time":"0900"}},{"close":{"day":1,"time":"1700"},"open":{"day":1,"time":"0900"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"0900"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"0900"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"0900"}},{"close":{"day":5,"time":"1700"},"open":{"day":5,"time":"0900"}}],"weekday_text":["Monday: 9:00 AM – 5:00 PM","Tuesday: 9:00 AM – 5:00 PM","Wednesday: 9:00 AM – 5:00 PM","Thursday: 9:00 AM – 5:00 PM","Friday: 9:00 AM – 5:00 PM","Saturday: Closed","Sunday: 9:00 AM – 7:30 PM"]},"place_id":"ChIJVTdcW_dYwokRNfeY2PEZDS8","rating":4.9,"url":"https://maps.google.com/?cid=3390394620991567669","utc_offset":-300,"vicinity":"123 West 57th Street # 3, New York","website":"http://www.cbcnyc.org/","location":{"lat":40.7650402,"lng":-73.9784578},"expected_time":35,"lat":40.7650402,"lng":-73.9784578},{"formatted_address":"New York, NY 10018, USA","formatted_phone_number":"(212) 768-4242","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"f450a4290a3af961748f0eb93931479d2898e990","international_phone_number":"+1 212-768-4242","name":"Bryant Park","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"2200"},"open":{"day":0,"time":"0700"}},{"close":{"day":1,"time":"2200"},"open":{"day":1,"time":"0700"}},{"close":{"day":2,"time":"2200"},"open":{"day":2,"time":"0700"}},{"close":{"day":3,"time":"2200"},"open":{"day":3,"time":"0700"}},{"close":{"day":4,"time":"2200"},"open":{"day":4,"time":"0700"}},{"close":{"day":5,"time":"2200"},"open":{"day":5,"time":"0700"}},{"close":{"day":6,"time":"2200"},"open":{"day":6,"time":"0700"}}],"weekday_text":["Monday: 7:00 AM – 10:00 PM","Tuesday: 7:00 AM – 10:00 PM","Wednesday: 7:00 AM – 10:00 PM","Thursday: 7:00 AM – 10:00 PM","Friday: 7:00 AM – 10:00 PM","Saturday: 7:00 AM – 10:00 PM","Sunday: 7:00 AM – 10:00 PM"]},"place_id":"ChIJvbGg56pZwokRp_E3JbivnLQ","rating":4.6,"url":"https://maps.google.com/?cid=13014470228627157415","utc_offset":-300,"vicinity":"New York","website":"http://www.bryantpark.org/","location":{"lat":40.7535965,"lng":-73.9832326},"expected_time":90,"lat":40.7535965,"lng":-73.9832326},{"formatted_address":"542 W 36th St, New York, NY 10018, USA","formatted_phone_number":"(646) 582-2273","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"f091996bcf77ae221170ac2046cec7b0e9db8541","international_phone_number":"+1 646-582-2273","name":"Hudson Yards Park","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"2300"},"open":{"day":0,"time":"0600"}},{"close":{"day":1,"time":"2300"},"open":{"day":1,"time":"0600"}},{"close":{"day":2,"time":"2300"},"open":{"day":2,"time":"0600"}},{"close":{"day":3,"time":"2300"},"open":{"day":3,"time":"0600"}},{"close":{"day":4,"time":"2300"},"open":{"day":4,"time":"0600"}},{"close":{"day":5,"time":"2300"},"open":{"day":5,"time":"0600"}},{"close":{"day":6,"time":"2300"},"open":{"day":6,"time":"0600"}}],"weekday_text":["Monday: 6:00 AM – 11:00 PM","Tuesday: 6:00 AM – 11:00 PM","Wednesday: 6:00 AM – 11:00 PM","Thursday: 6:00 AM – 11:00 PM","Friday: 6:00 AM – 11:00 PM","Saturday: 6:00 AM – 11:00 PM","Sunday: 6:00 AM – 11:00 PM"]},"place_id":"ChIJY7fnXbNZwokRKgpXxu-dZKQ","rating":4.3,"url":"https://maps.google.com/?cid=11845766573041584682","utc_offset":-300,"vicinity":"542 West 36th Street, New York","website":"https://www.nycgovparks.org/parks/hudson-park","location":{"lat":40.7562005,"lng":-73.9999874},"expected_time":69,"lat":40.7562005,"lng":-73.9999874}],[{"formatted_address":"89 E 42nd St, New York, NY 10017, USA","formatted_phone_number":"(212) 878-0106","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"b2bbc3b8e3993cfae16fa88c2c1ee984de04801e","international_phone_number":"+1 212-878-0106","name":"New York Transit Museum Gallery Annex & Store","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1800"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"2000"},"open":{"day":1,"time":"0800"}},{"close":{"day":2,"time":"2000"},"open":{"day":2,"time":"0800"}},{"close":{"day":3,"time":"2000"},"open":{"day":3,"time":"0800"}},{"close":{"day":4,"time":"2000"},"open":{"day":4,"time":"0800"}},{"close":{"day":5,"time":"2000"},"open":{"day":5,"time":"0800"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 8:00 AM – 8:00 PM","Tuesday: 8:00 AM – 8:00 PM","Wednesday: 8:00 AM – 8:00 PM","Thursday: 8:00 AM – 8:00 PM","Friday: 8:00 AM – 8:00 PM","Saturday: 10:00 AM – 6:00 PM","Sunday: 10:00 AM – 6:00 PM"]},"place_id":"ChIJPfEQoU5awokRNdBwGAHP83E","rating":4.2,"url":"https://maps.google.com/?cid=8211134149238509621","utc_offset":-300,"vicinity":"89 East 42nd Street, New York","website":"http://www.nytransitmuseum.org/","location":{"lat":40.7531584,"lng":-73.9779755},"expected_time":34,"lat":40.7531584,"lng":-73.9779755},{"formatted_address":"225 Madison Ave, New York, NY 10016, USA","formatted_phone_number":"(212) 685-0008","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"1b5b32c5d96bd02e586f1d2dfcef7ca9aa848373","international_phone_number":"+1 212-685-0008","name":"The Morgan Library & Museum","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1800"},"open":{"day":0,"time":"1100"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"1030"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"1030"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"1030"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"1030"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 10:30 AM – 5:00 PM","Wednesday: 10:30 AM – 5:00 PM","Thursday: 10:30 AM – 5:00 PM","Friday: 10:30 AM – 9:00 PM","Saturday: 10:00 AM – 6:00 PM","Sunday: 11:00 AM – 6:00 PM"]},"place_id":"ChIJ3453OAdZwokRja92OOKCugM","price_level":3,"rating":4.6,"url":"https://maps.google.com/?cid=268671035903487885","utc_offset":-300,"vicinity":"225 Madison Avenue, New York","website":"http://www.themorgan.org/","location":{"lat":40.7492258,"lng":-73.9813971},"expected_time":39,"lat":40.7492258,"lng":-73.9813971},{"formatted_address":"390 5th Ave #902, New York, NY 10018, USA","formatted_phone_number":"(212) 947-5654","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"47d4007672684a9f5b23aaa14250cde68e92aed8","international_phone_number":"+1 212-947-5654","name":"American Friends of Israel Science Museum","place_id":"ChIJn_OT-qlZwokRoS1iAK5QYXk","rating":3,"url":"https://maps.google.com/?cid=8746360659591179681","utc_offset":-300,"vicinity":"390 5th Avenue #902, New York","website":"http://www.israelscience.org/","location":{"lat":40.74976110000001,"lng":-73.9841277},"expected_time":64,"lat":40.74976110000001,"lng":-73.9841277},{"formatted_address":"869 Lexington Ave, New York, NY 10065, USA","formatted_phone_number":"(212) 744-2080","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"cd153ac11919d7f90cff8bad5b8fa6621fd0de8d","international_phone_number":"+1 212-744-2080","name":"Church of Saint Vincent Ferrer","place_id":"ChIJuS0gSOlYwokRyGckJ2JT8aY","rating":4.5,"url":"https://maps.google.com/?cid=12029487760711903176","utc_offset":-300,"vicinity":"869 Lexington Avenue, New York","website":"http://www.svsc.info/","location":{"lat":40.7660775,"lng":-73.9650583},"expected_time":78,"lat":40.7660775,"lng":-73.9650583},{"formatted_address":"524 Park Ave, New York, NY 10065, USA","formatted_phone_number":"(212) 838-3036","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"f4c89954e379d741af219f03ee72a44414cf30b5","international_phone_number":"+1 212-838-3036","name":"Christ Church NYC","place_id":"ChIJJaB_je9YwokRBB5RweBg3EE","rating":4.1,"url":"https://maps.google.com/?cid=4745774625773919748","utc_offset":-300,"vicinity":"524 Park Avenue, New York","website":"http://www.christchurchnyc.org/","location":{"lat":40.7637455,"lng":-73.9695996},"expected_time":61,"lat":40.7637455,"lng":-73.9695996},{"formatted_address":"777 United Nations Plaza # 9N, New York, NY 10017, USA","formatted_phone_number":"(212) 682-6535","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png","id":"3a4ddc580c3649200f946bbd1ee1945a7bdf2ad9","international_phone_number":"+1 212-682-6535","name":"Church World Services Inc","place_id":"ChIJl6sQ5RxZwokRSTWEOsa3y9I","rating":1,"url":"https://maps.google.com/?cid=15189436230250280265","utc_offset":-300,"vicinity":"777 United Nations Plaza # 9N, New York","website":"http://www.churchworldservice.org/","location":{"lat":40.7501208,"lng":-73.969297},"expected_time":65,"lat":40.7501208,"lng":-73.969297},{"formatted_address":"777 United Nations Plaza, New York, NY 10017, USA","formatted_phone_number":"(212) 973-1700","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png","id":"d019677378f6844636ef19fc169df2c6d8adb9a8","international_phone_number":"+1 212-973-1700","name":"Church Center of the United Nations","place_id":"ChIJi8qu5RxZwokROHK70ZW5XIQ","rating":5,"url":"https://maps.google.com/?cid=9537702163983856184","utc_offset":-300,"vicinity":"777 United Nations Plaza, New York","website":"http://umc-gbcs.org/","location":{"lat":40.7501208,"lng":-73.969297},"expected_time":78,"lat":40.7501208,"lng":-73.969297},{"formatted_address":"250 E 61st St, New York, NY 10065, USA","formatted_phone_number":"(212) 838-6844","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"167169ebce51adfe9b963c168730ce33e4955b7b","international_phone_number":"+1 212-838-6844","name":"Trinity Baptist Church","place_id":"ChIJ0aaQIeZYwokRyASYeW2fKwI","rating":4.8,"url":"https://maps.google.com/?cid=156393904614671560","utc_offset":-300,"vicinity":"250 East 61st Street, New York","website":"http://tbcny.org/","location":{"lat":40.7619137,"lng":-73.9641061},"expected_time":90,"lat":40.7619137,"lng":-73.9641061},{"formatted_address":"315 E 47th St, New York, NY 10017, USA","formatted_phone_number":"(212) 753-3401","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"b852b99385d83211f7e045d1eea870e6261a98b8","international_phone_number":"+1 212-753-3401","name":"Church of the Holy Family (The United Nations Parish)","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1630"},"open":{"day":0,"time":"0730"}},{"close":{"day":1,"time":"1800"},"open":{"day":1,"time":"0730"}},{"close":{"day":2,"time":"1800"},"open":{"day":2,"time":"0730"}},{"close":{"day":3,"time":"1800"},"open":{"day":3,"time":"0730"}},{"close":{"day":4,"time":"1800"},"open":{"day":4,"time":"0730"}},{"close":{"day":5,"time":"1800"},"open":{"day":5,"time":"0730"}},{"close":{"day":6,"time":"1830"},"open":{"day":6,"time":"0730"}}],"weekday_text":["Monday: 7:30 AM – 6:00 PM","Tuesday: 7:30 AM – 6:00 PM","Wednesday: 7:30 AM – 6:00 PM","Thursday: 7:30 AM – 6:00 PM","Friday: 7:30 AM – 6:00 PM","Saturday: 7:30 AM – 6:30 PM","Sunday: 7:30 AM – 4:30 PM"]},"place_id":"ChIJY7Q_eh1ZwokRpdFTGXaIPoc","rating":4.6,"url":"https://maps.google.com/?cid=9745376684488774053","utc_offset":-300,"vicinity":"315 East 47th Street, New York","website":"http://www.churchholyfamily.org/","location":{"lat":40.75272189999999,"lng":-73.9686265},"expected_time":90,"lat":40.75272189999999,"lng":-73.9686265},{"formatted_address":"40 E 35th St, New York, NY 10016, USA","formatted_phone_number":"(212) 683-4988","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"021e5097c006da18ca6abc852f772d2869e1390b","international_phone_number":"+1 212-683-4988","name":"The Community Church of New York","place_id":"ChIJ8_cPDQdZwokRQSztVAsAMzQ","rating":4.2,"url":"https://maps.google.com/?cid=3761350162453965889","utc_offset":-300,"vicinity":"40 East 35th Street, New York","website":"http://www.ccny.org/","location":{"lat":40.7477911,"lng":-73.9815947},"expected_time":46,"lat":40.7477911,"lng":-73.9815947},{"formatted_address":"325 Park Ave, New York, NY 10022, USA","formatted_phone_number":"(212) 378-0222","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"6efd01c9eb5cfbb6db7849f89ee4d278d0e520fc","international_phone_number":"+1 212-378-0222","name":"St Bartholomew's Church","place_id":"ChIJ0zRtw_xYwokRwwRCPeCLMfg","rating":4.4,"url":"https://maps.google.com/?cid=17884229390481622211","utc_offset":-300,"vicinity":"325 Park Avenue, New York","website":"http://stbarts.org/","location":{"lat":40.7574311,"lng":-73.973333},"expected_time":40,"lat":40.7574311,"lng":-73.973333},{"formatted_address":"619 Lexington Ave, New York, NY 10022, USA","formatted_phone_number":"(212) 935-2200","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"ca3fb49bccecc70d6196796796924d9d373fcb84","international_phone_number":"+1 212-935-2200","name":"Saint Peter's Church","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"2000"},"open":{"day":0,"time":"0830"}},{"close":{"day":1,"time":"2000"},"open":{"day":1,"time":"0830"}},{"close":{"day":2,"time":"2000"},"open":{"day":2,"time":"0830"}},{"close":{"day":3,"time":"2000"},"open":{"day":3,"time":"0830"}},{"close":{"day":4,"time":"2000"},"open":{"day":4,"time":"0830"}},{"close":{"day":5,"time":"2000"},"open":{"day":5,"time":"0830"}},{"close":{"day":6,"time":"2000"},"open":{"day":6,"time":"0830"}}],"weekday_text":["Monday: 8:30 AM – 8:00 PM","Tuesday: 8:30 AM – 8:00 PM","Wednesday: 8:30 AM – 8:00 PM","Thursday: 8:30 AM – 8:00 PM","Friday: 8:30 AM – 8:00 PM","Saturday: 8:30 AM – 8:00 PM","Sunday: 8:30 AM – 8:00 PM"]},"place_id":"ChIJya1GpeRYwokR3Ot66ajr104","rating":4.6,"url":"https://maps.google.com/?cid=5681268565655350236","utc_offset":-300,"vicinity":"619 Lexington Avenue, New York","website":"http://www.saintpeters.org/your-church/location/","location":{"lat":40.75881400000001,"lng":-73.970443},"expected_time":78,"lat":40.75881400000001,"lng":-73.970443},{"formatted_address":"3 E 53rd St, New York, NY 10022, USA","formatted_phone_number":"(212) 639-9675","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"419df35f8d8721a1551348a9b917a90abf67deea","international_phone_number":"+1 212-639-9675","name":"Paley Park","opening_hours":{"open_now":true,"periods":[{"open":{"day":0,"time":"0000"}}],"weekday_text":["Monday: Open 24 hours","Tuesday: Open 24 hours","Wednesday: Open 24 hours","Thursday: Open 24 hours","Friday: Open 24 hours","Saturday: Open 24 hours","Sunday: Open 24 hours"]},"place_id":"ChIJcUYGvftYwokRXvGL1B_cN2o","rating":4.4,"url":"https://maps.google.com/?cid=7653828121007485278","utc_offset":-300,"vicinity":"3 East 53rd Street, New York","website":"http://www.nycgovparks.org/","location":{"lat":40.7602082,"lng":-73.9749154},"expected_time":48,"lat":40.7602082,"lng":-73.9749154},{"formatted_address":"Sutton Pl S, New York, NY 10022, USA","formatted_phone_number":"(212) 639-9675","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"7abb7593cca4e9d23ea2c4235c766f64fc8f0ae2","international_phone_number":"+1 212-639-9675","name":"Sutton Place Park South","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"2100"},"open":{"day":0,"time":"0900"}},{"close":{"day":1,"time":"2100"},"open":{"day":1,"time":"0900"}},{"close":{"day":2,"time":"2100"},"open":{"day":2,"time":"0900"}},{"close":{"day":3,"time":"2100"},"open":{"day":3,"time":"0900"}},{"close":{"day":4,"time":"2100"},"open":{"day":4,"time":"0900"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"0900"}},{"close":{"day":6,"time":"2100"},"open":{"day":6,"time":"0900"}}],"weekday_text":["Monday: 9:00 AM – 9:00 PM","Tuesday: 9:00 AM – 9:00 PM","Wednesday: 9:00 AM – 9:00 PM","Thursday: 9:00 AM – 9:00 PM","Friday: 9:00 AM – 9:00 PM","Saturday: 9:00 AM – 9:00 PM","Sunday: 9:00 AM – 9:00 PM"]},"place_id":"ChIJi-vy_OBYwokRQSBj116BYNs","rating":4.2,"url":"https://maps.google.com/?cid=15807776936410947649","utc_offset":-300,"vicinity":"Sutton Place South, New York","website":"https://www.nycgovparks.org/parks/sutton-place-park","location":{"lat":40.7550982,"lng":-73.9621787},"expected_time":83,"lat":40.7550982,"lng":-73.9621787}]];
    // getTours(clusters,function (results) {
    //     res.json(results);
    // })
});


function getDetails(pois,callback){
    var promises=[];

    for(var i in pois){
        if (pois[i].rating !== undefined){
            promises.push(
                new Promise(function (resolve) {
                    api.getDetails(pois[i].place_id,function (result) {
                        resolve(result);
                    });
                })
            );
        }
    }
    Promise.all(promises).then(function (pois) {
        callback(pois);
    });
}

function getClusters(pois,days,callback) { //ordenar de menor a mayor PILAS, de acuerdo al tiempo
    var kmeans =  new KmeansLib();
    var clusters=new Array(days);

    // ver luego lo de Location
    pois.map(function (poi) {
        poi.lat = poi.location.lat;
        poi.lng = poi.location.lng;
        return poi;
    });

    kmeans.init({k: days, runs: ~~(pois.length / days), equalSize: true, normalize: false });
    kmeans.calc(pois);

    // group in clusters
    for(i in pois){
        var index=pois[i].k;
        delete pois[i].k;
        try{
            clusters[index].push(pois[i]);
        }catch(err){
            clusters[index]=[];
            clusters[index].push(pois[i]);
        }
    }
    callback(clusters);
}



function getTours(clusters,callback) {
    var tours = [];
    var promises = [];
    const keys = ['AIzaSyAgg8nvSsVsJo_fOvJB0113sJ9saV6BgEo','AIzaSyDZJ4eK77EVxoJsUIzqUZMJgpmxJsFQvyo','AIzaSyCfqVM0MdOINSwxu_n9Sy_nYzs29-La-zE'];
    clusters.forEach(function (cluster,index,clusters) {
        //--------RESOLVER ESTO LUEGO---------
        cluster.sort(function(a, b) {
            return b.rating - a.rating;
        });
        clusters[index] = cluster.slice(0,7);
        //------------------------------------
        promises.push(new Promise(function (resolve) {
            api.getMatrix(clusters[index],keys[index],function (matrix) {
                resolve(matrix);
            });
        }));
    });

    Promise.all(promises).then(function (matrixes) {
        //quitar esto
        // fs.appendFileSync('matrixes.txt', `\n-------\n${JSON.stringify(matrixes)}\n-------\n`);
        // fs.appendFileSync('matrixes.txt', `\n-------\n${JSON.stringify(clusters)}\n-------\n`);

        // resolver de acuerdo a las fechas escogidas
        var date = new Date(new Date().toDateString().split(' ').splice(1,3).join(' ')+' 10:00:00');
        var tours = [];
        for(var i in matrixes){
            date.setDate(date.getDate()+1);
            const parameters = {
                baseRoute:clusters[i],
                date:date,
                totalCities:clusters[i].length,
                distanceMatrix:matrixes[i],
                mutation_rate: 0.03,
                sizePopulation:clusters[i].length*clusters[i].length,
                totalGenerations:50
            };
            tours.push(ga.evolve(parameters));
        }
        callback(tours);
    });
}

// app.get('/chch',function (req,res) {
//     const clusters = [[{"formatted_address":"3 W 65th St, New York, NY 10023, USA","formatted_phone_number":"(212) 877-6815","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"a3d4fefa1ac2674697e902b47213cc077371bad6","international_phone_number":"+1 212-877-6815","name":"Holy Trinity Lutheran Church","place_id":"ChIJl4xr-fRYwokRvITflUru_ns","rating":4.9,"url":"https://maps.google.com/?cid=8934840714859087036","utc_offset":-300,"vicinity":"3 West 65th Street, New York","website":"http://www.holytrinitynyc.org/","location":{"lat":40.77208590000001,"lng":-73.97945229999999},"expected_time":54,"lat":40.77208590000001,"lng":-73.97945229999999},{"formatted_address":"405 W 59th St, New York, NY 10019, USA","formatted_phone_number":"(212) 265-3495","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"9a21620619374c7cd37052f0318612c6b8c3f48b","international_phone_number":"+1 212-265-3495","name":"The Church of St. Paul the Apostle","place_id":"ChIJC1050FhYwokR_5BJB8M4-bo","rating":4.8,"url":"https://maps.google.com/?cid=13472862170547589375","utc_offset":-300,"vicinity":"405 West 59th Street, New York","website":"http://www.stpaultheapostle.org/","location":{"lat":40.7699132,"lng":-73.985153},"expected_time":62,"lat":40.7699132,"lng":-73.985153},{"formatted_address":"New York, NY, USA","formatted_phone_number":"(212) 310-6600","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"c9bcef33f0cc85eda31f1c7444e9b1a3b82c9a9f","international_phone_number":"+1 212-310-6600","name":"Central Park","opening_hours":{"open_now":true,"periods":[{"close":{"day":1,"time":"0100"},"open":{"day":0,"time":"0600"}},{"close":{"day":2,"time":"0100"},"open":{"day":1,"time":"0600"}},{"close":{"day":3,"time":"0100"},"open":{"day":2,"time":"0600"}},{"close":{"day":4,"time":"0100"},"open":{"day":3,"time":"0600"}},{"close":{"day":5,"time":"0100"},"open":{"day":4,"time":"0600"}},{"close":{"day":6,"time":"0100"},"open":{"day":5,"time":"0600"}},{"close":{"day":0,"time":"0100"},"open":{"day":6,"time":"0600"}}],"weekday_text":["Monday: 6:00 AM – 1:00 AM","Tuesday: 6:00 AM – 1:00 AM","Wednesday: 6:00 AM – 1:00 AM","Thursday: 6:00 AM – 1:00 AM","Friday: 6:00 AM – 1:00 AM","Saturday: 6:00 AM – 1:00 AM","Sunday: 6:00 AM – 1:00 AM"]},"place_id":"ChIJ4zGFAZpYwokRGUGph3Mf37k","rating":4.8,"url":"https://maps.google.com/?cid=13393458397880860953","utc_offset":-300,"vicinity":"New York","website":"http://www.centralparknyc.org/","location":{"lat":40.7828647,"lng":-73.9653551},"expected_time":79,"lat":40.7828647,"lng":-73.9653551},{"formatted_address":"1000 5th Ave, New York, NY 10028, USA","formatted_phone_number":"(212) 535-7710","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"f732f202150af1f14ae8a057a1014ceea6b33fc4","international_phone_number":"+1 212-535-7710","name":"The Metropolitan Museum of Art","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1730"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1730"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1730"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1730"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1730"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"2100"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:30 PM","Tuesday: 10:00 AM – 5:30 PM","Wednesday: 10:00 AM – 5:30 PM","Thursday: 10:00 AM – 5:30 PM","Friday: 10:00 AM – 9:00 PM","Saturday: 10:00 AM – 9:00 PM","Sunday: 10:00 AM – 5:30 PM"]},"place_id":"ChIJb8Jg9pZYwokR-qHGtvSkLzs","rating":4.8,"url":"https://maps.google.com/?cid=4264808743088595450","utc_offset":-300,"vicinity":"1000 5th Avenue, New York","website":"http://www.metmuseum.org/","location":{"lat":40.7794366,"lng":-73.963244},"expected_time":83,"lat":40.7794366,"lng":-73.963244},{"formatted_address":"175-208 79th Street Central Park West, New York, NY 10024, USA","formatted_phone_number":"(212) 769-5100","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"c413262999f0818e8355b7539ff6eaf8eb6d0550","international_phone_number":"+1 212-769-5100","name":"Rose Center for Earth & Space","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1745"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1745"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1745"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1745"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1745"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1745"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1745"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:45 PM","Tuesday: 10:00 AM – 5:45 PM","Wednesday: 10:00 AM – 5:45 PM","Thursday: 10:00 AM – 5:45 PM","Friday: 10:00 AM – 5:45 PM","Saturday: 10:00 AM – 5:45 PM","Sunday: 10:00 AM – 5:45 PM"]},"place_id":"ChIJo9DW6I9YwokR8UjIKmzHkrI","rating":4.8,"url":"https://maps.google.com/?cid=12867566352739092721","utc_offset":-300,"vicinity":"175-208 79th Street Central Park West, New York","website":"http://www.amnh.org/rose/","location":{"lat":40.78154379999999,"lng":-73.97324309999999},"expected_time":50,"lat":40.78154379999999,"lng":-73.97324309999999},{"formatted_address":"1 E 70th St, New York, NY 10021, USA","formatted_phone_number":"(212) 288-0700","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"87e936eb75a829e0363d510c2060a6621f83f9c7","international_phone_number":"+1 212-288-0700","name":"The Frick Collection","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1700"},"open":{"day":0,"time":"1100"}},{"close":{"day":2,"time":"1800"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1800"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1800"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1800"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 10:00 AM – 6:00 PM","Wednesday: 10:00 AM – 6:00 PM","Thursday: 10:00 AM – 6:00 PM","Friday: 10:00 AM – 6:00 PM","Saturday: 10:00 AM – 6:00 PM","Sunday: 11:00 AM – 5:00 PM"]},"place_id":"ChIJHRH97uxYwokR6CBeDyn1jtg","rating":4.6,"url":"https://maps.google.com/?cid=15604679315585638632","utc_offset":-300,"vicinity":"1 East 70th Street, New York","website":"http://www.frick.org/","location":{"lat":40.771209,"lng":-73.9673991},"expected_time":40,"lat":40.771209,"lng":-73.9673991},{"formatted_address":"Central Park West & 79th St, New York, NY 10024, USA","formatted_phone_number":"(212) 769-5100","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"d9dd2c58ebb5c5cb4d00b28db933b7e220a34b5a","international_phone_number":"+1 212-769-5100","name":"American Museum of Natural History","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1745"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1745"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1745"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1745"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1745"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1745"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1745"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:45 PM","Tuesday: 10:00 AM – 5:45 PM","Wednesday: 10:00 AM – 5:45 PM","Thursday: 10:00 AM – 5:45 PM","Friday: 10:00 AM – 5:45 PM","Saturday: 10:00 AM – 5:45 PM","Sunday: 10:00 AM – 5:45 PM"]},"place_id":"ChIJCXoPsPRYwokRsV1MYnKBfaI","rating":4.6,"url":"https://maps.google.com/?cid=11708656934508584369","utc_offset":-300,"vicinity":"Central Park West & 79th St, New York","website":"http://www.amnh.org/","location":{"lat":40.78132409999999,"lng":-73.9739882},"expected_time":35,"lat":40.78132409999999,"lng":-73.9739882}],[{"formatted_address":"308 W 46th St, New York, NY 10036, USA","formatted_phone_number":"(212) 246-3540","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"68fe3c195df22960137d461ae69de4bbbc9c70f9","international_phone_number":"+1 212-246-3540","name":"St Luke's Lutheran Church","place_id":"ChIJq8nBDVRYwokRJiahNbQZYcU","rating":5,"url":"https://maps.google.com/?cid=14222677359997298214","utc_offset":-300,"vicinity":"308 West 46th Street, New York","website":"http://www.stlukesnyc.org/","location":{"lat":40.7600066,"lng":-73.98869069999999},"expected_time":48,"lat":40.7600066,"lng":-73.98869069999999},{"formatted_address":"123 W 57th St # 3, New York, NY 10019, USA","formatted_phone_number":"(212) 975-0170","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png","id":"80736da1aa0301951ffa51927bce3fbc49238c29","international_phone_number":"+1 212-975-0170","name":"Calvary Baptist Church","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1930"},"open":{"day":0,"time":"0900"}},{"close":{"day":1,"time":"1700"},"open":{"day":1,"time":"0900"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"0900"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"0900"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"0900"}},{"close":{"day":5,"time":"1700"},"open":{"day":5,"time":"0900"}}],"weekday_text":["Monday: 9:00 AM – 5:00 PM","Tuesday: 9:00 AM – 5:00 PM","Wednesday: 9:00 AM – 5:00 PM","Thursday: 9:00 AM – 5:00 PM","Friday: 9:00 AM – 5:00 PM","Saturday: Closed","Sunday: 9:00 AM – 7:30 PM"]},"place_id":"ChIJVTdcW_dYwokRNfeY2PEZDS8","rating":4.9,"url":"https://maps.google.com/?cid=3390394620991567669","utc_offset":-300,"vicinity":"123 West 57th Street # 3, New York","website":"http://www.cbcnyc.org/","location":{"lat":40.7650402,"lng":-73.9784578},"expected_time":35,"lat":40.7650402,"lng":-73.9784578},{"formatted_address":"1166 Avenue of the Americas 16th Floor, New York, NY 10036, USA","formatted_phone_number":"(212) 808-4460","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"9649e699bf5b4206e23c2620caf22ed36de390aa","international_phone_number":"+1 212-808-4460","name":"Redeemer Presbyterian Church Offices","place_id":"ChIJG3veoshYwokR6GrX_-_I_18","rating":4.9,"url":"https://maps.google.com/?cid=6917468485779417832","utc_offset":-300,"vicinity":"1166 Avenue of the Americas 16th Floor, New York","website":"http://www.redeemer.com/","location":{"lat":40.7568777,"lng":-73.9820345},"expected_time":42,"lat":40.7568777,"lng":-73.9820345},{"formatted_address":"237 W 51st St, New York, NY 10019, USA","formatted_phone_number":"(212) 541-6300","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"bb4ac2e4ec26910d50f4cf23c1b1bb448d9e63e6","international_phone_number":"+1 212-541-6300","name":"Times Square Church","opening_hours":{"open_now":false,"periods":[{"close":{"day":0,"time":"2000"},"open":{"day":0,"time":"0800"}},{"close":{"day":2,"time":"2100"},"open":{"day":2,"time":"1700"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"1730"}}],"weekday_text":["Monday: Closed","Tuesday: 5:00 – 9:00 PM","Wednesday: Closed","Thursday: Closed","Friday: 5:30 – 9:00 PM","Saturday: Closed","Sunday: 8:00 AM – 8:00 PM"]},"place_id":"ChIJVUGHS1ZYwokRx39CH6zNL5M","rating":4.7,"url":"https://maps.google.com/?cid=10605921786623328199","utc_offset":-300,"vicinity":"237 West 51st Street, New York","website":"http://tsc.nyc/","location":{"lat":40.76234169999999,"lng":-73.98393879999999},"expected_time":49,"lat":40.76234169999999,"lng":-73.98393879999999},{"formatted_address":"1 W 53rd St, New York, NY 10019, USA","formatted_phone_number":"(212) 757-7013","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"37a913d1b1383a74feb58d11d53c80825450452d","international_phone_number":"+1 212-757-7013","name":"Saint Thomas Church Fifth Avenue","place_id":"ChIJQxcQwftYwokRKy-FqagoB7g","rating":4.6,"url":"https://maps.google.com/?cid=13260612332679409451","utc_offset":-300,"vicinity":"1 West 53rd Street, New York","website":"http://www.saintthomaschurch.org/","location":{"lat":40.7608247,"lng":-73.9763978},"expected_time":66,"lat":40.7608247,"lng":-73.9763978},{"formatted_address":"New York, NY 10018, USA","formatted_phone_number":"(212) 768-4242","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"f450a4290a3af961748f0eb93931479d2898e990","international_phone_number":"+1 212-768-4242","name":"Bryant Park","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"2200"},"open":{"day":0,"time":"0700"}},{"close":{"day":1,"time":"2200"},"open":{"day":1,"time":"0700"}},{"close":{"day":2,"time":"2200"},"open":{"day":2,"time":"0700"}},{"close":{"day":3,"time":"2200"},"open":{"day":3,"time":"0700"}},{"close":{"day":4,"time":"2200"},"open":{"day":4,"time":"0700"}},{"close":{"day":5,"time":"2200"},"open":{"day":5,"time":"0700"}},{"close":{"day":6,"time":"2200"},"open":{"day":6,"time":"0700"}}],"weekday_text":["Monday: 7:00 AM – 10:00 PM","Tuesday: 7:00 AM – 10:00 PM","Wednesday: 7:00 AM – 10:00 PM","Thursday: 7:00 AM – 10:00 PM","Friday: 7:00 AM – 10:00 PM","Saturday: 7:00 AM – 10:00 PM","Sunday: 7:00 AM – 10:00 PM"]},"place_id":"ChIJvbGg56pZwokRp_E3JbivnLQ","rating":4.6,"url":"https://maps.google.com/?cid=13014470228627157415","utc_offset":-300,"vicinity":"New York","website":"http://www.bryantpark.org/","location":{"lat":40.7535965,"lng":-73.9832326},"expected_time":90,"lat":40.7535965,"lng":-73.9832326},{"formatted_address":"Pier 86, W 46th St & 12th Ave, New York, NY 10036, USA","formatted_phone_number":"(212) 245-0072","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"6bb43beb2047e4db91e332d24782460ccf8194c2","international_phone_number":"+1 212-245-0072","name":"Intrepid Sea, Air & Space Museum","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1700"},"open":{"day":0,"time":"1000"}},{"close":{"day":1,"time":"1700"},"open":{"day":1,"time":"1000"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"1000"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"1000"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"1000"}},{"close":{"day":5,"time":"1700"},"open":{"day":5,"time":"1000"}},{"close":{"day":6,"time":"1700"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: 10:00 AM – 5:00 PM","Tuesday: 10:00 AM – 5:00 PM","Wednesday: 10:00 AM – 5:00 PM","Thursday: 10:00 AM – 5:00 PM","Friday: 10:00 AM – 5:00 PM","Saturday: 10:00 AM – 5:00 PM","Sunday: 10:00 AM – 5:00 PM"]},"place_id":"ChIJnxlg1U5YwokR8T90UrZiIwI","rating":4.6,"url":"https://maps.google.com/?cid=154075347467649009","utc_offset":-300,"vicinity":"Pier 86, West 46th Street & 12th Ave, New York","website":"http://www.intrepidmuseum.org/","location":{"lat":40.7645266,"lng":-73.99960759999999},"expected_time":69,"lat":40.7645266,"lng":-73.99960759999999}],[{"formatted_address":"777 United Nations Plaza, New York, NY 10017, USA","formatted_phone_number":"(212) 973-1700","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png","id":"d019677378f6844636ef19fc169df2c6d8adb9a8","international_phone_number":"+1 212-973-1700","name":"Church Center of the United Nations","place_id":"ChIJi8qu5RxZwokROHK70ZW5XIQ","rating":5,"url":"https://maps.google.com/?cid=9537702163983856184","utc_offset":-300,"vicinity":"777 United Nations Plaza, New York","website":"http://umc-gbcs.org/","location":{"lat":40.7501208,"lng":-73.969297},"expected_time":78,"lat":40.7501208,"lng":-73.969297},{"formatted_address":"250 E 61st St, New York, NY 10065, USA","formatted_phone_number":"(212) 838-6844","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"167169ebce51adfe9b963c168730ce33e4955b7b","international_phone_number":"+1 212-838-6844","name":"Trinity Baptist Church","place_id":"ChIJ0aaQIeZYwokRyASYeW2fKwI","rating":4.8,"url":"https://maps.google.com/?cid=156393904614671560","utc_offset":-300,"vicinity":"250 East 61st Street, New York","website":"http://tbcny.org/","location":{"lat":40.7619137,"lng":-73.9641061},"expected_time":90,"lat":40.7619137,"lng":-73.9641061},{"formatted_address":"619 Lexington Ave, New York, NY 10022, USA","formatted_phone_number":"(212) 935-2200","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"ca3fb49bccecc70d6196796796924d9d373fcb84","international_phone_number":"+1 212-935-2200","name":"Saint Peter's Church","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"2000"},"open":{"day":0,"time":"0830"}},{"close":{"day":1,"time":"2000"},"open":{"day":1,"time":"0830"}},{"close":{"day":2,"time":"2000"},"open":{"day":2,"time":"0830"}},{"close":{"day":3,"time":"2000"},"open":{"day":3,"time":"0830"}},{"close":{"day":4,"time":"2000"},"open":{"day":4,"time":"0830"}},{"close":{"day":5,"time":"2000"},"open":{"day":5,"time":"0830"}},{"close":{"day":6,"time":"2000"},"open":{"day":6,"time":"0830"}}],"weekday_text":["Monday: 8:30 AM – 8:00 PM","Tuesday: 8:30 AM – 8:00 PM","Wednesday: 8:30 AM – 8:00 PM","Thursday: 8:30 AM – 8:00 PM","Friday: 8:30 AM – 8:00 PM","Saturday: 8:30 AM – 8:00 PM","Sunday: 8:30 AM – 8:00 PM"]},"place_id":"ChIJya1GpeRYwokR3Ot66ajr104","rating":4.6,"url":"https://maps.google.com/?cid=5681268565655350236","utc_offset":-300,"vicinity":"619 Lexington Avenue, New York","website":"http://www.saintpeters.org/your-church/location/","location":{"lat":40.75881400000001,"lng":-73.970443},"expected_time":78,"lat":40.75881400000001,"lng":-73.970443},{"formatted_address":"225 Madison Ave, New York, NY 10016, USA","formatted_phone_number":"(212) 685-0008","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png","id":"1b5b32c5d96bd02e586f1d2dfcef7ca9aa848373","international_phone_number":"+1 212-685-0008","name":"The Morgan Library & Museum","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1800"},"open":{"day":0,"time":"1100"}},{"close":{"day":2,"time":"1700"},"open":{"day":2,"time":"1030"}},{"close":{"day":3,"time":"1700"},"open":{"day":3,"time":"1030"}},{"close":{"day":4,"time":"1700"},"open":{"day":4,"time":"1030"}},{"close":{"day":5,"time":"2100"},"open":{"day":5,"time":"1030"}},{"close":{"day":6,"time":"1800"},"open":{"day":6,"time":"1000"}}],"weekday_text":["Monday: Closed","Tuesday: 10:30 AM – 5:00 PM","Wednesday: 10:30 AM – 5:00 PM","Thursday: 10:30 AM – 5:00 PM","Friday: 10:30 AM – 9:00 PM","Saturday: 10:00 AM – 6:00 PM","Sunday: 11:00 AM – 6:00 PM"]},"place_id":"ChIJ3453OAdZwokRja92OOKCugM","price_level":3,"rating":4.6,"url":"https://maps.google.com/?cid=268671035903487885","utc_offset":-300,"vicinity":"225 Madison Avenue, New York","website":"http://www.themorgan.org/","location":{"lat":40.7492258,"lng":-73.9813971},"expected_time":39,"lat":40.7492258,"lng":-73.9813971},{"formatted_address":"315 E 47th St, New York, NY 10017, USA","formatted_phone_number":"(212) 753-3401","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"b852b99385d83211f7e045d1eea870e6261a98b8","international_phone_number":"+1 212-753-3401","name":"Church of the Holy Family (The United Nations Parish)","opening_hours":{"open_now":true,"periods":[{"close":{"day":0,"time":"1630"},"open":{"day":0,"time":"0730"}},{"close":{"day":1,"time":"1800"},"open":{"day":1,"time":"0730"}},{"close":{"day":2,"time":"1800"},"open":{"day":2,"time":"0730"}},{"close":{"day":3,"time":"1800"},"open":{"day":3,"time":"0730"}},{"close":{"day":4,"time":"1800"},"open":{"day":4,"time":"0730"}},{"close":{"day":5,"time":"1800"},"open":{"day":5,"time":"0730"}},{"close":{"day":6,"time":"1830"},"open":{"day":6,"time":"0730"}}],"weekday_text":["Monday: 7:30 AM – 6:00 PM","Tuesday: 7:30 AM – 6:00 PM","Wednesday: 7:30 AM – 6:00 PM","Thursday: 7:30 AM – 6:00 PM","Friday: 7:30 AM – 6:00 PM","Saturday: 7:30 AM – 6:30 PM","Sunday: 7:30 AM – 4:30 PM"]},"place_id":"ChIJY7Q_eh1ZwokRpdFTGXaIPoc","rating":4.6,"url":"https://maps.google.com/?cid=9745376684488774053","utc_offset":-300,"vicinity":"315 East 47th Street, New York","website":"http://www.churchholyfamily.org/","location":{"lat":40.75272189999999,"lng":-73.9686265},"expected_time":90,"lat":40.75272189999999,"lng":-73.9686265},{"formatted_address":"869 Lexington Ave, New York, NY 10065, USA","formatted_phone_number":"(212) 744-2080","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/worship_general-71.png","id":"cd153ac11919d7f90cff8bad5b8fa6621fd0de8d","international_phone_number":"+1 212-744-2080","name":"Church of Saint Vincent Ferrer","place_id":"ChIJuS0gSOlYwokRyGckJ2JT8aY","rating":4.5,"url":"https://maps.google.com/?cid=12029487760711903176","utc_offset":-300,"vicinity":"869 Lexington Avenue, New York","website":"http://www.svsc.info/","location":{"lat":40.7660775,"lng":-73.9650583},"expected_time":78,"lat":40.7660775,"lng":-73.9650583},{"formatted_address":"3 E 53rd St, New York, NY 10022, USA","formatted_phone_number":"(212) 639-9675","icon":"https://maps.gstatic.com/mapfiles/place_api/icons/generic_recreational-71.png","id":"419df35f8d8721a1551348a9b917a90abf67deea","international_phone_number":"+1 212-639-9675","name":"Paley Park","opening_hours":{"open_now":true,"periods":[{"open":{"day":0,"time":"0000"}}],"weekday_text":["Monday: Open 24 hours","Tuesday: Open 24 hours","Wednesday: Open 24 hours","Thursday: Open 24 hours","Friday: Open 24 hours","Saturday: Open 24 hours","Sunday: Open 24 hours"]},"place_id":"ChIJcUYGvftYwokRXvGL1B_cN2o","rating":4.4,"url":"https://maps.google.com/?cid=7653828121007485278","utc_offset":-300,"vicinity":"3 East 53rd Street, New York","website":"http://www.nycgovparks.org/","location":{"lat":40.7602082,"lng":-73.9749154},"expected_time":48,"lat":40.7602082,"lng":-73.9749154}]];
//     const matrixes = [[[null,{"distance":783,"duration":10.266666666666667,"points":"sgzwFfcpbMoEnNdAt@dAl@p@f@z@j@xBzA~BtAxBzAbCzAy@hC"},{"distance":122,"duration":1.6833333333333333,"points":"sgzwFfcpbM\\eAg@]iAu@HU@CDC"},{"distance":1950,"duration":25.183333333333334,"points":"sgzwFfcpbMh@iBBQB_@AYGm@VIEa@AI@o@JYDEIWQ]WYOMXeAcDoAg@QAUOeCEuD?uA@WH{@Pq@Bg@@w@DWZs@^w@_A_AGGGMGM]Ye@MMIOUUEI?Hk@PqAu@WM}@ESEMUa@QK[_@AAGBQHa@Ry@gBAS?_AOe@s@uAO_@HOTYg@wAa@aASYiA{@w@[WQMUO]Mg@Ke@CeAAa@CaAOm@WUMS[aAQk@L_@H]@g@UOoGeE"},{"distance":1352,"duration":17.433333333333334,"points":"sgzwFfcpbM\\eAg@]wA_A_KwGkFoDsGgEaOwJuFqDk@|@OPa@Co@fBKGw@i@Cu@"},{"distance":1313,"duration":16.616666666666667,"points":"sgzwFfcpbMh@iBBQB_@AYGm@Kw@@e@T_Ax@wAtDwHjDeGz@mBX{@Jc@\\qB^eCDo@@_AEeC?cADu@Nw@FUsA}@cDuBgCeBsBsAp@uB"},{"distance":1149,"duration":14.566666666666666,"points":"sgzwFfcpbM\\eAg@]wA_A_KwGkFoDsGgEaOwJwBzG"}],[{"distance":783,"duration":10.266666666666667,"points":"sgzwFfcpbMoEnNdAt@dAl@p@f@z@j@xBzA~BtAxBzAbCzAy@hC"},null,{"distance":490,"duration":6.433333333333334,"points":"kxywFbhqbMx@iCcC{APYh@{A|@wCp@qBNo@D]r@?HCJMVe@@IDOHOLKBAQg@"},{"distance":2733,"duration":34.9,"points":"kxywFbhqbMx@iCcC{AyB{A_CuAyB{A{@k@q@g@eAm@eAu@lFuPP}@?]?[AOEUVIGe@?I?c@DQJSCOMYQYUSGGLe@J_@eBs@eBm@I{AIaBEwDBsAHq@DQNu@@iALk@`@w@P_@w@{@OKISSQOOUE]QOUKCSAPuAHg@u@WOgAO_@S]YSQUOHUFUNk@kAMe@AW?q@CK_@_Ao@oAX_@DIM_@Oc@Qg@_@y@}@u@o@_@o@WQUMUa@_BEaCI}@IWWU[s@_@mARs@BW@YGCm@a@oFoD"},{"distance":1968,"duration":25.116666666666667,"points":"kxywFbhqbMx@iCcC{AyB{A_CuAyB{A{@k@q@g@eAm@eAu@u@g@eEmCyFyDyFoDoGmE}B}AaCwAaG_EwBwA}ByAF]@K?YIe@Ye@w@k@QKBQA]K[Rq@Ra@?ICU?O?K@G@EFANALGRSLYDMNL"},{"distance":1986,"duration":25.083333333333332,"points":"kxywFbhqbMx@iCcC{APYh@{A|@wCp@qBNo@D]r@?HCJMVe@@IDOHOZSJADs@?KB{AJ_AJi@Tm@Pq@?i@GqA[e@o@oAQUGGDQPk@T}@HQCUIo@KWOSgAaBc@UU[_@o@Oc@QYYQ{@e@CCAIGe@KIACAI?u@k@uAUy@VkBVmALMEQCW?OBABABABCDEBQAOEOKGG?Oq@Ya@UYIUGUZaAJUZm@D[?_@E[i@oAGMe@]UiA]q@WYQ[_@u@H@HALCHKLWBEDBFBBCDQsBsAp@uB"},{"distance":1678,"duration":21.633333333333333,"points":"kxywFbhqbMx@iCcC{AyB{A_CuAyB{A{@k@q@g@eAm@eAu@u@g@eEmCyFyDyFoDoGmE}B}AaCwAaG_EuFsD"}],[{"distance":122,"duration":1.6833333333333333,"points":"sgzwFfcpbM\\eAg@]iAu@HU@CDC"},{"distance":490,"duration":6.433333333333334,"points":"kxywFbhqbMx@iCcC{APYh@{A|@wCp@qBNo@D]r@?HCJMVe@@IDOHOLKBAQg@"},null,{"distance":165,"duration":2.1,"points":"sh{wFf`mbMHUeBkAiCcB"},{"distance":227,"duration":3.283333333333333,"points":"o_|wFjvnbMKZl@`@k@|@OPa@Co@fBKGw@i@Cu@"},{"distance":137,"duration":1.8833333333333333,"points":"i_zwF`~mbMDOsBsAp@uB"},{"distance":41,"duration":0.6666666666666666,"points":"o_|wFjvnbMKZh@^"}],[{"distance":1950,"duration":25.183333333333334,"points":"sgzwFfcpbMh@iBBQB_@AYGm@VIEa@AI@o@JYDEIWQ]WYOMXeAcDoAg@QAUOeCEuD?uA@WH{@Pq@Bg@@w@DWZs@^w@_A_AGGGMGM]Ye@MMIOUUEI?Hk@PqAu@WM}@ESEMUa@QK[_@AAGBQHa@Ry@gBAS?_AOe@s@uAO_@HOTYg@wAa@aASYiA{@w@[WQMUO]Mg@Ke@CeAAa@CaAOm@WUMS[aAQk@L_@H]@g@UOoGeE"},{"distance":2733,"duration":34.9,"points":"kxywFbhqbMx@iCcC{AyB{A_CuAyB{A{@k@q@g@eAm@eAu@lFuPP}@?]?[AOEUVIGe@?I?c@DQJSCOMYQYUSGGLe@J_@eBs@eBm@I{AIaBEwDBsAHq@DQNu@@iALk@`@w@P_@w@{@OKISSQOOUE]QOUKCSAPuAHg@u@WOgAO_@S]YSQUOHUFUNk@kAMe@AW?q@CK_@_Ao@oAX_@DIM_@Oc@Qg@_@y@}@u@o@_@o@WQUMUa@_BEaCI}@IWWU[s@_@mARs@BW@YGCm@a@oFoD"},{"distance":165,"duration":2.1,"points":"sh{wFf`mbMHUeBkAiCcB"},null,{"distance":1285,"duration":15.9,"points":"yo{wF`zlbMhCbBdBjAWp@Yd@o@`@e@j@S`@MZQFSNq@z@YRYDY@KCYh@k@t@e@n@Sb@SZOL[HQJSNB\\B`@AXEj@Kd@a@|@q@b@DjA?h@Mz@CTE\\K?Q|A?RFV@HQ~@GRKLa@^u@x@cAh@q@VA\\ADCH]|@PLa@pAhAv@LX@d@Qv@NL"},{"distance":973,"duration":12.033333333333333,"points":"yo{wF`zlbMvOfK~FxDlO`KzBvAp@uB"},{"distance":1183,"duration":14.883333333333333,"points":"yo{wF`zlbMnGdETNAf@I\\e@dAi@v@KXI\\?xAG\\OP[JONQl@GNKNSr@CZNPLZBT?^Y|@[h@a@v@Mb@CZHdBPxABl@G`@QVu@r@GVC?A\\OXm@d@q@f@a@VK?O@KJE@AZIDS^IJw@hAUD_@XEZIRIFG?O@IDYp@h@^"}],[{"distance":1352,"duration":17.433333333333334,"points":"sgzwFfcpbM\\eAg@]wA_A_KwGkFoDsGgEaOwJuFqDk@|@OPa@Co@fBKGw@i@Cu@"},{"distance":1968,"duration":25.116666666666667,"points":"kxywFbhqbMx@iCcC{AyB{A_CuAyB{A{@k@q@g@eAm@eAu@u@g@eEmCyFyDyFoDoGmE}B}AaCwAaG_EwBwA}ByAF]@K?YIe@Ye@w@k@QKBQA]K[Rq@Ra@?ICU?O?K@G@EFANALGRSLYDMNL"},{"distance":227,"duration":3.283333333333333,"points":"o_|wFjvnbMKZl@`@k@|@OPa@Co@fBKGw@i@Cu@"},{"distance":1285,"duration":15.9,"points":"yo{wF`zlbMhCbBdBjAWp@Yd@o@`@e@j@S`@MZQFSNq@z@YRYDY@KCYh@k@t@e@n@Sb@SZOL[HQJSNB\\B`@AXEj@Kd@a@|@q@b@DjA?h@Mz@CTE\\K?Q|A?RFV@HQ~@GRKLa@^u@x@cAh@q@VA\\ADCH]|@PLa@pAhAv@LX@d@Qv@NL"},null,{"distance":1723,"duration":21.9,"points":"ce|wFtznbMOMBML_@?g@K]IIcAq@`@qAHMHMBEn@PlCr@|AJPQLGTE`AuAR_@HE@[FCLKV?`Ao@r@g@Zg@@]B?rAh@\\MXIh@@Je@JoADMb@}@FQJBF?PADFDJDHFF?CDIdAwA`@e@@MDMDEDAFBJDDAPEVSR@h@RXBnASh@CHOTYX`@TNL?LM?_@FUFOfAiAXDRH\\NP?ZMf@k@RIRELB^BTDRJFYd@wAdEnC|@l@p@uB"},{"distance":292,"duration":3.45,"points":"ce|wFtznbMOMELMXSR]HG@ADAF?J?NBT?HS`@Sp@FJBN@\\CPPJv@j@Xd@Hd@Ad@GZ"}],[{"distance":1313,"duration":16.616666666666667,"points":"sgzwFfcpbMh@iBBQB_@AYGm@Kw@@e@T_Ax@wAtDwHjDeGz@mBX{@Jc@\\qB^eCDo@@_AEeC?cADu@Nw@FUsA}@cDuBgCeBsBsAp@uB"},{"distance":1986,"duration":25.083333333333332,"points":"kxywFbhqbMx@iCcC{APYh@{A|@wCp@qBNo@D]r@?HCJMVe@@IDOHOZSJADs@?KB{AJ_AJi@Tm@Pq@?i@GqA[e@o@oAQUGGDQPk@T}@HQCUIo@KWOSgAaBc@UU[_@o@Oc@QYYQ{@e@CCAIGe@KIACAI?u@k@uAUy@VkBVmALMEQCW?OBABABABCDEBQAOEOKGG?Oq@Ya@UYIUGUZaAJUZm@D[?_@E[i@oAGMe@]UiA]q@WYQ[_@u@H@HALCHKLWBEDBFBBCDQsBsAp@uB"},{"distance":137,"duration":1.8833333333333333,"points":"i_zwF`~mbMDOsBsAp@uB"},{"distance":973,"duration":12.033333333333333,"points":"yo{wF`zlbMvOfK~FxDlO`KzBvAp@uB"},{"distance":1723,"duration":21.9,"points":"ce|wFtznbMOMBML_@?g@K]IIcAq@`@qAHMHMBEn@PlCr@|AJPQLGTE`AuAR_@HE@[FCLKV?`Ao@r@g@Zg@@]B?rAh@\\MXIh@@Je@JoADMb@}@FQJBF?PADFDJDHFF?CDIdAwA`@e@@MDMDEDAFBJDDAPEVSR@h@RXBnASh@CHOTYX`@TNL?LM?_@FUFOfAiAXDRH\\NP?ZMf@k@RIRELB^BTDRJFYd@wAdEnC|@l@p@uB"},null,{"distance":1487,"duration":19.116666666666667,"points":"eazwFfwmbMq@tB{BwAgCeBOd@Y~@CJSKq@I]AQFi@d@[VOBUEi@WUCe@d@e@j@K\\?^IHEDUGWWMSEHY^gBPWD_@Gi@SE@i@XM?MGIDGLANkAvA_@j@AFIIKWGCI?I@MCSl@Yd@Mv@Gz@EJi@Ak@PKDCCsAe@A\\OXm@d@q@f@a@VK?O@GDCDE@AZIDS^IJw@hAUD_@XEZIRIFG?O@QPQd@h@^"}],[{"distance":1149,"duration":14.566666666666666,"points":"sgzwFfcpbM\\eAg@]wA_A_KwGkFoDsGgEaOwJwBzG"},{"distance":1678,"duration":21.633333333333333,"points":"kxywFbhqbMx@iCcC{AyB{A_CuAyB{A{@k@q@g@eAm@eAu@u@g@eEmCyFyDyFoDoGmE}B}AaCwAaG_EuFsD"},{"distance":41,"duration":0.6666666666666666,"points":"o_|wFjvnbMKZh@^"},{"distance":1183,"duration":14.883333333333333,"points":"yo{wF`zlbMnGdETNAf@I\\e@dAi@v@KXI\\?xAG\\OP[JONQl@GNKNSr@CZNPLZBT?^Y|@[h@a@v@Mb@CZHdBPxABl@G`@QVu@r@GVC?A\\OXm@d@q@f@a@VK?O@KJE@AZIDS^IJw@hAUD_@XEZIRIFG?O@IDYp@h@^"},{"distance":292,"duration":3.45,"points":"ce|wFtznbMOMELMXSR]HG@ADAF?J?NBT?HS`@Sp@FJBN@\\CPPJv@j@Xd@Hd@Ad@GZ"},{"distance":1487,"duration":19.116666666666667,"points":"eazwFfwmbMq@tB{BwAgCeBOd@Y~@CJSKq@I]AQFi@d@[VOBUEi@WUCe@d@e@j@K\\?^IHEDUGWWMSEHY^gBPWD_@Gi@SE@i@XM?MGIDGLANkAvA_@j@AFIIKWGCI?I@MCSl@Yd@Mv@Gz@EJi@Ak@PKDCCsAe@A\\OXm@d@q@f@a@VK?O@GDCDE@AZIDS^IJw@hAUD_@XEZIRIFG?O@QPQd@h@^"},null]],[[null,{"distance":1366,"duration":17.633333333333333,"points":"o}wwF|{qbMTo@b@{A{B}AyFsD{FuDyFuDmEuCiD{BiCcBrAeE~CqJvAyE`@kA"},{"distance":733,"duration":9.566666666666666,"points":"o}wwF|{qbMTo@tEaO`CnAh@aBNg@rGoS"},{"distance":597,"duration":7.783333333333333,"points":"o}wwF|{qbMTo@b@{A{B}AyFsD{FuDtBqG"},{"distance":1419,"duration":18.15,"points":"o}wwF|{qbMTo@b@{A{B}AyFsD{FuDyFuDzCsJbI{VtEaO"},{"distance":909,"duration":11.95,"points":"o}wwF|{qbMTo@tEaOd@yArCt@@@BALSN?JB`Ad@^DhCv@d@VhBr@lDuKb@uAVL"},{"distance":1002,"duration":12.85,"points":"o}wwF|{qbMc@pAcHtTkItW}CxJ]fANJM`@EC"}],[{"distance":1366,"duration":17.633333333333333,"points":"o}wwF|{qbMTo@b@{A{B}AyFsD{FuDyFuDmEuCiD{BiCcBrAeE~CqJvAyE`@kA"},null,{"distance":1135,"duration":14.266666666666667,"points":"u{xwF~|obMZ}@vAqEfC`BzFvDvFrDlGdEvA~@jGbExFrDd@yA"},{"distance":766,"duration":9.65,"points":"u{xwF~|obMyBdHbG|DtNlJ{BdH"},{"distance":704,"duration":8.883333333333333,"points":"u{xwF~|obMZ}@vAqEfC`BzFvDzBxA^kAtDuL"},{"distance":1363,"duration":17.316666666666666,"points":"u{xwF~|obMZ}@vAqEfC`BzFvDvFrDlGdEvA~@`WlPvCnBPW"},{"distance":2354,"duration":29.483333333333334,"points":"u{xwF~|obMyBdHbG|DxFtDzB|Ae@xAc@vAcDbKkUht@aE~LIXrClBbBlAzFrDfFdDNRJJ"}],[{"distance":733,"duration":9.566666666666666,"points":"o}wwF|{qbMTo@tEaO`CnAh@aBNg@rGoS"},{"distance":1135,"duration":14.266666666666667,"points":"u{xwF~|obMZ}@vAqEfC`BzFvDvFrDlGdEvA~@jGbExFrDd@yA"},null,{"distance":867,"duration":10.983333333333333,"points":"sgwwF`tpbM{GbT{GcBmCs@mAk@w@YcEcCy@c@s@vB"},{"distance":926,"duration":11.466666666666667,"points":"sgwwF`tpbMe@xAyFsDkGcEwA_AmGeE{ByA^kAtDuL"},{"distance":314,"duration":4.083333333333333,"points":"sgwwF`tpbMe@xAzFtDvCnBPW"},{"distance":1714,"duration":21.766666666666666,"points":"sgwwF`tpbMcLd^cJhYwBxGkCtIcGdRk@dB]Si@~AGDG?YOSl@g@]Qh@M`@EC"}],[{"distance":597,"duration":7.783333333333333,"points":"o}wwF|{qbMTo@b@{A{B}AyFsD{FuDtBqG"},{"distance":766,"duration":9.65,"points":"u{xwF~|obMyBdHbG|DtNlJ{BdH"},{"distance":867,"duration":10.983333333333333,"points":"sgwwF`tpbM{GbT{GcBmCs@mAk@w@YcEcCy@c@s@vB"},null,{"distance":820,"duration":10.35,"points":"qkxwFv`qbMbF_PdC_I}ByA{ByA^kAtDuL"},{"distance":1054,"duration":13.45,"points":"qkxwFv`qbMr@wBx@b@bEbCv@XlAj@lCr@zGbBD@B?HIFID?J@x@^n@LhCv@d@VhBr@`CoHbAaDJYVL"},{"distance":1592,"duration":19.916666666666668,"points":"qkxwFv`qbMgJjY}GtTiJpYSh@d@ZvA~@KZlG~DzE~CNTDB"}],[{"distance":1419,"duration":18.15,"points":"o}wwF|{qbMTo@b@{A{B}AyFsD{FuDyFuDzCsJbI{VtEaO"},{"distance":704,"duration":8.883333333333333,"points":"u{xwF~|obMZ}@vAqEfC`BzFvDzBxA^kAtDuL"},{"distance":926,"duration":11.466666666666667,"points":"sgwwF`tpbMe@xAyFsDkGcEwA_AmGeE{ByA^kAtDuL"},{"distance":820,"duration":10.35,"points":"qkxwFv`qbMbF_PdC_I}ByA{ByA^kAtDuL"},null,{"distance":1097,"duration":13.75,"points":"kaxwF`pobMv@cC~@j@xDhC|BxA~AdAvCpBrH|E~HjFfC~Ak@dBwApED@"},{"distance":2405,"duration":30,"points":"kaxwF`pobMeJrYiH`UuQnk@eDnKAHFPlAhAEDOT{@dCTNLHkAtD]`AvFzDlG~DzE~CNTDB"}],[{"distance":909,"duration":11.95,"points":"o}wwF|{qbMTo@tEaOd@yArCt@@@BALSN?JB`Ad@^DhCv@d@VhBr@lDuKb@uAVL"},{"distance":1363,"duration":17.316666666666666,"points":"u{xwF~|obMZ}@vAqEfC`BzFvDvFrDlGdEvA~@`WlPvCnBPW"},{"distance":314,"duration":4.083333333333333,"points":"sgwwF`tpbMe@xAzFtDvCnBPW"},{"distance":1054,"duration":13.45,"points":"qkxwFv`qbMr@wBx@b@bEbCv@XlAj@lCr@zGbBD@B?HIFID?J@x@^n@LhCv@d@VhBr@`CoHbAaDJYVL"},{"distance":1097,"duration":13.75,"points":"kaxwF`pobMv@cC~@j@xDhC|BxA~AdAvCpBrH|E~HjFfC~Ak@dBwApED@"},null,{"distance":1908,"duration":24.183333333333334,"points":"s{vwFh_qbMWMc@tAmDtKiBs@e@WiCw@_@EIC}@c@SAEBGNE?A?EAGRqAbE_B`F}GfTyAnEgE~MeHtTcA|CAFMM]WSOg@]Qh@M`@EC"}],[{"distance":1002,"duration":12.85,"points":"o}wwF|{qbMc@pAcHtTkItW}CxJ]fANJM`@EC"},{"distance":2354,"duration":29.483333333333334,"points":"u{xwF~|obMyBdHbG|DxFtDzB|Ae@xAc@vAcDbKkUht@aE~LIXrClBbBlAzFrDfFdDNRJJ"},{"distance":1714,"duration":21.766666666666666,"points":"sgwwF`tpbMcLd^cJhYwBxGkCtIcGdRk@dB]Si@~AGDG?YOSl@g@]Qh@M`@EC"},{"distance":1592,"duration":19.916666666666668,"points":"qkxwFv`qbMgJjY}GtTiJpYSh@d@ZvA~@KZlG~DzE~CNTDB"},{"distance":2405,"duration":30,"points":"kaxwF`pobMeJrYiH`UuQnk@eDnKAHFPlAhAEDOT{@dCTNLHkAtD]`AvFzDlG~DzE~CNTDB"},{"distance":1908,"duration":24.183333333333334,"points":"s{vwFh_qbMWMc@tAmDtKiBs@e@WiCw@_@EIC}@c@SAEBGNE?A?EAGRqAbE_B`F}GfTyAnEgE~MeHtTcA|CAFMM]WSOg@]Qh@M`@EC"},null]],[[null,{"distance":1616,"duration":20.733333333333334,"points":"a`vwFnbnbMM^}CxJ}B{AkD{BmAy@wNkJqNkJgPqK}E_Dk@lB"},{"distance":1351,"duration":16.833333333333332,"points":"a`vwFnbnbMkJ|YiC~H{FwDwB{AaCwAiBmAkCiBwE{CeGaE"},{"distance":1453,"duration":18.983333333333334,"points":"a`vwFnbnbMM^}CxJ|B|AbC~AzF|DvFtDhBjARHd@X~@j@TRQh@{AvEqA`EaGlRuAfE"},{"distance":373,"duration":4.433333333333334,"points":"a`vwFnbnbMXw@@E}AcA{CqBa@WIAc@EWEc@K{ApE"},{"distance":2277,"duration":29.1,"points":"a`vwFnbnbMkJ|YiC~H{FwDwB{AaCwAiBmAkCiBwE{C}GqEeO}JaEmCuDaC}B{A_CwA}GuE"},{"distance":1673,"duration":21.6,"points":"a`vwFnbnbMkJ|YiC~H{FwDwB{AaCwAiBmAkCiBwE{C_DsBoCtIcEhM"}],[{"distance":1616,"duration":20.733333333333334,"points":"a`vwFnbnbMM^}CxJ}B{AkD{BmAy@wNkJqNkJgPqK}E_Dk@lB"},null,{"distance":901,"duration":11.433333333333334,"points":"ajxwFzambMuGpS~AfAzClBhK`HnGdE"},{"distance":2563,"duration":32.9,"points":"ajxwFzambMmCpIrA~@f@XlAx@h@`@|BzAnGdEzBxAjBrAd@TjBlAzBvAzB~AvFvD`CvAzB|A`@TtIxF`OvJvFvDhBnAd@TdBjAOb@qBxGuEvN"},{"distance":1287,"duration":16.116666666666667,"points":"ajxwFzambMj@mBbC~Al@`@bC|ApIvFxFpDtFxDvNjJ~BxA|A{E"},{"distance":660,"duration":8.416666666666666,"points":"ajxwFzambMuGpS}B{A_CwAuFyDg@["},{"distance":1352,"duration":17.75,"points":"ajxwFzambMeLj^_CjHjBnAb@^jJbGnBvApChB~BtA|BzAcA|C"}],[{"distance":1351,"duration":16.833333333333332,"points":"a`vwFnbnbMkJ|YiC~H{FwDwB{AaCwAiBmAkCiBwE{CeGaE"},{"distance":901,"duration":11.433333333333334,"points":"ajxwFzambMuGpS~AfAzClBhK`HnGdE"},null,{"distance":1667,"duration":21.583333333333332,"points":"avwwFjknbMdG`EvEzCjChBhBlA`CvAvBzAzFvDvClBnJhGnNfJuEvN"},{"distance":1020,"duration":12.683333333333334,"points":"avwwFjknbMdG`EvEzCjChBhBlA`CvA`@mAbBmF~DeM|A{E"},{"distance":926,"duration":12.283333333333333,"points":"avwwFjknbM}TaO}CoB}CuBqBmAeIqF"},{"distance":453,"duration":6.383333333333334,"points":"avwwFjknbMdBlAoCtIcEhM"}],[{"distance":1453,"duration":18.983333333333334,"points":"a`vwFnbnbMM^}CxJ|B|AbC~AzF|DvFtDhBjARHd@X~@j@TRQh@{AvEqA`EaGlRuAfE"},{"distance":2563,"duration":32.9,"points":"ajxwFzambMmCpIrA~@f@XlAx@h@`@|BzAnGdEzBxAjBrAd@TjBlAzBvAzB~AvFvD`CvAzB|A`@TtIxF`OvJvFvDhBnAd@TdBjAOb@qBxGuEvN"},{"distance":1667,"duration":21.583333333333332,"points":"avwwFjknbMdG`EvEzCjChBhBlA`CvAvBzAzFvDvClBnJhGnNfJuEvN"},null,{"distance":1603,"duration":20.05,"points":"uvuwFdnpbMtAgE~BoHyB{AwFqDyFqDmGcEyFsDwF{DrH}UnB_G"},{"distance":2593,"duration":33.05,"points":"uvuwFdnpbMtAgE~BoHyB{AwFqDyFqDmGcEyFsDwF{DgDsBqA}@wJqGwJsGsMuIqKgHqBmAaDyBcDwB"},{"distance":1389,"duration":17.4,"points":"{zuwF`qpbMeLuHcEmCuB}AgEmC_CwAaEiCsDkC{B{AaEkCwDaC{B}AcA|C"}],[{"distance":373,"duration":4.433333333333334,"points":"a`vwFnbnbMXw@@E}AcA{CqBa@WIAc@EWEc@K{ApE"},{"distance":1287,"duration":16.116666666666667,"points":"ajxwFzambMj@mBbC~Al@`@bC|ApIvFxFpDtFxDvNjJ~BxA|A{E"},{"distance":1020,"duration":12.683333333333334,"points":"avwwFjknbMdG`EvEzCjChBhBlA`CvA`@mAbBmF~DeM|A{E"},{"distance":1603,"duration":20.05,"points":"uvuwFdnpbMtAgE~BoHyB{AwFqDyFqDmGcEyFsDwF{DrH}UnB_G"},null,{"distance":1946,"duration":25.166666666666668,"points":"gnvwFz_nbMoB~FgGtRk@fBgDsBkIsFoGiEoW}P}CoB}CuBqBmAeIqF"},{"distance":1342,"duration":17.7,"points":"gnvwFz_nbMoB~FgGtRk@fBgDsBkIsF}B{A}B{A{BjHc@hAsDhL"}],[{"distance":2277,"duration":29.1,"points":"a`vwFnbnbMkJ|YiC~H{FwDwB{AaCwAiBmAkCiBwE{C}GqEeO}JaEmCuDaC}B{A_CwA}GuE"},{"distance":660,"duration":8.416666666666666,"points":"ajxwFzambMuGpS}B{A_CwAuFyDg@["},{"distance":926,"duration":12.283333333333333,"points":"avwwFjknbM}TaO}CoB}CuBqBmAeIqF"},{"distance":2593,"duration":33.05,"points":"uvuwFdnpbMtAgE~BoHyB{AwFqDyFqDmGcEyFsDwF{DgDsBqA}@wJqGwJsGsMuIqKgHqBmAaDyBcDwB"},{"distance":1946,"duration":25.166666666666668,"points":"gnvwFz_nbMoB~FgGtRk@fBgDsBkIsFoGiEoW}P}CoB}CuBqBmAeIqF"},null,{"distance":1378,"duration":18.216666666666665,"points":"scywFbjmbMdIpFpBlA|CtB|CnBdHvEhNdJRP{BjHc@hAsDhL"}],[{"distance":1673,"duration":21.6,"points":"a`vwFnbnbMkJ|YiC~H{FwDwB{AaCwAiBmAkCiBwE{C_DsBoCtIcEhM"},{"distance":1352,"duration":17.75,"points":"ajxwFzambMeLj^_CjHjBnAb@^jJbGnBvApChB~BtA|BzAcA|C"},{"distance":453,"duration":6.383333333333334,"points":"avwwFjknbMdBlAoCtIcEhM"},{"distance":1389,"duration":17.4,"points":"{zuwF`qpbMeLuHcEmCuB}AgEmC_CwAaEiCsDkC{B{AaEkCwDaC{B}AcA|C"},{"distance":1342,"duration":17.7,"points":"gnvwFz_nbMoB~FgGtRk@fBgDsBkIsF}B{A}B{A{BjHc@hAsDhL"},{"distance":1378,"duration":18.216666666666665,"points":"scywFbjmbMdIpFpBlA|CtB|CnBdHvEhNdJRP{BjHc@hAsDhL"},null]]];
//     var date = new Date(new Date().toDateString().split(' ').splice(1,3).join(' ')+' 10:00:00');
//     var tours = [];
//
//     for(var i in matrixes){
//         const parameters = {
//             baseRoute:clusters[i],
//             date:date,
//             totalCities:clusters[i].length,
//             distanceMatrix:matrixes[i],
//             mutation_rate: 0.03,
//             sizePopulation:clusters[i].length*clusters[i].length,
//             totalGenerations:50
//         };
//         tours.push(ga.evolve(parameters));
//     }
//     var t = [];
//     var r = [];
//     for(i in tours){
//         t.push(tours[i].tour);
//         r.push(tours[i].routes);
//     }
//     res.json({
//         toursss:t,
//         caca:r
//     });
// });


